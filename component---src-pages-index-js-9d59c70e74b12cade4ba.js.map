{"version":3,"sources":["webpack:///./src/constants/colors.js","webpack:///./src/components/header.js","webpack:///./src/utils/api.js","webpack:///./src/constants/urls.js","webpack:///./src/components/chat/ResizableTextarea.js","webpack:///./src/hooks/useKeyPress.js","webpack:///./src/components/chat/ChatInput.js","webpack:///./src/components/users/Avatar.js","webpack:///./src/components/chat/ChatMessage.js","webpack:///./src/components/chat/Chat.js","webpack:///./src/components/login/LoginInput.js","webpack:///./src/components/login/LoginForm.js","webpack:///./src/components/welcome/Welcome.js","webpack:///./src/components/draggable/Draggable.js","webpack:///./src/utils/helpers.js","webpack:///./src/components/habits/Habit.js","webpack:///./src/components/draggable/DraggableList.js","webpack:///./src/components/habits/Habits.js","webpack:///./src/components/signup/SignupForm.js","webpack:///./src/components/users/User.js","webpack:///./src/components/users/Users.js","webpack:///./src/components/reMemory/commonComponents.js","webpack:///./src/components/reMemory/Suggestions.js","webpack:///./src/components/reMemory/InputTag.js","webpack:///./src/components/reMemory/MemoryInput.js","webpack:///./src/components/reMemory/Sticky.js","webpack:///./src/components/reMemory/Memory.js","webpack:///./src/components/reMemory/Search.js","webpack:///./src/components/reMemory/Settings.js","webpack:///./src/components/reMemory/ReMemory.js","webpack:///./src/components/main.js","webpack:///./src/pages/index.js","webpack:///./src/components/layout.js","webpack:///./src/components/seo.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer-prod.js"],"names":["colors","Header","_ref","siteTitle","setCurrentUser","setLoginSuccessful","react_default","a","createElement","style","background","Wrapper","Heading","gatsby_browser_entry","to","onClick","sessionStorage","setItem","document","location","reload","color","textDecoration","SignOut","clear","undefined","styled","div","_templateObject","h1","_templateObject2","span","_templateObject3","propTypes","PropTypes","string","defaultProps","get","asyncToGenerator_default","regenerator_default","mark","_callee","url","token","value","wrap","_context","prev","next","axios","params","then","response","data","catch","error","console","sent","abrupt","stop","_x","_x2","apply","this","arguments","create","_ref2","_callee2","body","_context2","post","log","_x3","_x4","_x5","update","_ref3","_callee3","_context3","put","_x6","_x7","_x8","remove","_ref4","_callee4","_context4","delete","_x9","_x10","apiUrl","process","defaultImageUrl","ResizableTextarea","setValue","rows","setRows","placeholder","id","Input","onChange","event","previousRows","target","currentRows","scrollHeight","scrollTop","textarea","ResizableTextarea_templateObject","useKeyPress","targetKey","_useState","useState","keyPressed","setKeyPressed","downHandler","key","upHandler","useEffect","window","addEventListener","removeEventListener","scrollToBottom","setTimeout","scrollTo","ChatInput","userId","setDbUpdate","dbUpdate","currentUser","_useState2","_useState3","doOnce","setDoOnce","enterPress","text","user","username","getElementById","focus","Fragment","ChatInputWrapper","ResizableTextarea_ResizableTextarea","Button","ChatInput_templateObject","button","ChatInput_templateObject2","Avatar","image","isVisible","size","margin","AvatarImage","src","alt","img","Avatar_templateObject","p","ChatMessage","message","isFirstMessage","users","isCurrentUser","wrapperRef","useRef","clicked","setClicked","editMode","setEditMode","messageText","setMessageText","find","_id","handleClickOutside","e","current","contains","ChatMessageWrapper","ref","Avatar_Avatar","Username","Message","empty","trim","EditText","MessageButton","preventDefault","stopPropagation","CreatedAt","createdAt","Date","updatedAt","toLocaleString","ChatMessage_templateObject","ChatMessage_templateObject2","ChatMessage_templateObject3","_templateObject4","_templateObject5","_templateObject6","Chat","messages","setMessages","ChatWrapper","ChatBox","Array","isArray","map","index","ChatMessage_ChatMessage","ChatInput_ChatInput","Chat_templateObject","Chat_templateObject2","LoginInput","type","LoginInput_Input","input","LoginInput_templateObject","LoginForm","setSignup","signUpSuccessful","showLogin","setShowLogin","setUsername","password","setPassword","_useState4","setUsers","_useState5","loginAttempt","setLoginAttempt","LoginFormWrapper","LoginInput_LoginInput","LoginButton","HandleLogin","Signup","LoginForm_templateObject","LoginForm_templateObject2","LoginForm_templateObject3","MOCK_USER","MOCK_PASSWORD","Object","assign","Welcome","WelcomeWrapper","Welcome_templateObject","Draggable","state","isDragging","originalX","originalY","translateX","translateY","lastTranslateX","lastTranslateY","handleTouchStart","axis","touches","_this","handleTouchMove","handleTouchEnd","props","onDragStart","x","clientX","y","clientY","setState","moveAlongAxis","onDrag","prevState","_onDrag","toLowerCase","onDragEnd","handleMouseDown","handleMouseMove","handleMouseUp","componentWillUnmount","render","_this2","_this$props","children","draggableStyle","_this$state","Container","onMouseDown","onTouchStart","React","Component","attrs","transform","Draggable_templateObject","_ref5","css","Draggable_templateObject2","Draggable_templateObject3","pad","num","s","substr","length","formatDateTime","dt","hideTime","dateTime","date","toLocaleDateString","hour","getHours","minute","getMinutes","uuidv4","replace","c","r","Math","random","toString","Habit","habit","addOccasion","deleteHabit","name","title","desc","description","rank","occ","occasions","setOccasions","expandedView","setExpandedView","showHistory","setShowHistory","editDescription","setEditDescription","temporaryDescription","setTemporaryDescription","_useState6","setDescription","_useState7","showNote","setShowNote","_useState8","note","setNote","onUpdateOccasion","o","onDeleteOccasion","filter","Habit_Container","HabitWrapper","Row","TopInfoLeft","Rank","TitleTimeWrapper","Title","Time","time","TopInfoRight","Add","Delete","ExpandedContent","width","LargeNoteInput","Description","EditWrapper","EditDescription","ButtonWrapper","EditButton","UL","occasion","Habit_Occasion","LI","SlimButton","Habit_templateObject","Habit_templateObject2","Habit_templateObject3","Habit_templateObject4","Habit_templateObject5","Habit_templateObject6","_templateObject7","label","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","ul","_templateObject17","li","_templateObject18","Em","_templateObject19","_templateObject20","_templateObject21","_templateObject22","DeleteSymbol","_templateObject23","NoteInput","_templateObject24","_templateObject25","Occasion","_useState9","showEdit","setShowEdit","_useState10","offset","el","rect","getBoundingClientRect","scrollLeft","pageXOffset","documentElement","pageYOffset","top","left","compare","b","DraggableList","listData","onListUpdate","setListOrder","list","setList","translatePosition","setTranslatePosition","setOriginalPosition","dropY","setDropY","currentDrop","setCurrentDrop","onAddOccasion","l","array","newArray","slice","unshift","onDeleteHabit","handleDragEnd","position","currentIndex","findIndex","t","rankedList","i","tasks","elementY","topValue","moveRank","currentDropList","sortedTasks","sort","Draggable_Draggable","handleDragStart","handleDrag","onDragOver","backgroundColor","padding","zIndex","Habit_Habit","HabitsWrapper","Habits_templateObject","ListContainer","Habits_templateObject2","Habits_templateObject3","selected","Habits","listOrder","habits","forEach","h","onCreateHabit","habitList","startDate","endDate","DraggableList_DraggableList","SaveOrderButton","InputWrapper","InputButton","Habits_templateObject4","Habits_templateObject5","Habits_templateObject6","SignupForm","setSignUpSuccessful","showSignup","setShowSignup","email","setEmail","firstname","setFirstname","lastname","setLastname","setLocation","setImage","signupAttempt","setSignupAttempt","SignupFormWrapper","SignupButton","HandleSignup","SignupForm_templateObject","SignupForm_templateObject2","signupData","User","updateUsers","setUpdateUsers","UserWrapper","AvatarWrapper","User_Username","User_MessageButton","Info","EditLabel","User_EditWrapper","User_EditText","User_templateObject","h2","User_templateObject2","User_templateObject3","User_templateObject4","User_templateObject5","User_templateObject6","User_templateObject7","User_templateObject8","Users","UsersWrapper","User_User","Users_templateObject","commonComponents_templateObject","commonComponents_templateObject2","MinimalButton","commonComponents_templateObject3","AddButton","commonComponents_templateObject4","commonComponents_templateObject5","Tags","commonComponents_templateObject6","Tag","commonComponents_templateObject7","commonComponents_templateObject8","showDetailedView","FlexWrapper","commonComponents_templateObject9","Select","select","Suggestions_templateObject","SelectChild","Suggestions_templateObject2","Suggestions","results","inputTag","setInputTag","addTag","setShowSuggestions","options","tabIndex","TagInput","InputTag_templateObject","InputTag","inputTags","setInputTags","memories","showSuggestions","tag","concat","endsWith","autocomplete","reMemory_Suggestions","m","includes","getLinkConfiguration","link","linkedId","linkedName","TextArea","MemoryInput_templateObject","Label","MemoryInput_templateObject2","InputArea","MemoryInput_templateObject3","FormButton","MemoryInput_templateObject4","DeleteButton","MemoryInput_templateObject5","confirmDelete","MemoryInput_templateObject6","MemoryInput_templateObject7","SelectParent","MemoryInput_templateObject8","MemoryInput","toggleRefresh","setToggleRefresh","updateMemory","setUpdateMemory","memoryLinks","setShowMemoryInput","showConfirmDelete","setShowConfirmDelete","inputName","setInputName","inputDescription","setInputDescription","tags","inputChild","setInputChild","inputChildren","setInputChildren","inputParent","setInputParent","parents","inputParents","setInputParents","commonComponents_Input","reMemory_InputTag","innerText","substring","MemoryInput_SelectChild","ml","some","child","parent","memory","removedChildren","removedChild","removedParents","removedParent","StickyWrapper","Sticky_templateObject","Sticky","Children","Memory_templateObject","Child","Memory_templateObject2","Parents","Memory_templateObject3","Parent","Memory_templateObject4","Name","Memory_templateObject5","Edit","Memory_templateObject6","Memory","searchQueries","setSearchQueries","setFocus","detailedViewFor","showDetailedViewFor","showEditButtons","setShowEditButtons","setShowDetailedView","parentLinks","childrenLinks","elements","every","searchQuery","element","commonComponents_LI","count","SearchWrapper","Search_templateObject","SearchResults","Search_templateObject2","Search","sq","reMemory_Memory","SearchSettings","Settings_templateObject","Setting","Settings_templateObject2","selectedSetting","Symbol","Settings_templateObject3","Settings","setShowDetailedViewFor","sortType","setSortType","sortAscending","setSortAscending","sortTypes","keys","view","_Object$assign","st","ReMemory","_React$createElement","showMemoryInput","showSettings","setShowSettings","setMemories","setMemoryLinks","sortedMemories","sortA","sortB","ReMemory_Container","ReMemory_Header","SearchIcon","AddIcon","SettingsIcon","Body","reMemory_MemoryInput","reMemory_Settings","reMemory_Search","elementId","blur","reMemory_Sticky","ReMemory_templateObject","ReMemory_templateObject2","ReMemory_templateObject3","ReMemory_templateObject4","Icon","ReMemory_templateObject5","ReMemory_templateObject6","ReMemory_templateObject7","tabs","Main","tab","setTab","signup","showSite","setShowSite","loginSuccessful","getItem","query","header","site","siteMetadata","MainWrapper","LoginForm_LoginForm","SignupForm_SignupForm","TabWrapper","Tab","saveTab","Welcome_Welcome","Users_Users","Chat_Chat","Habits_Habits","ReMemory_ReMemory","_2994927498","main_templateObject","main_templateObject2","main_templateObject3","IndexPage","layout","seo","keywords","main_Main","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","Layout","paddingTop","node","isRequired","SEO","lang","meta","_public_static_d_2417117884_json__WEBPACK_IMPORTED_MODULE_0__","metaDescription","react__WEBPACK_IMPORTED_MODULE_1___default","react_helmet__WEBPACK_IMPORTED_MODULE_3___default","htmlAttributes","titleTemplate","content","property","author","join","arrayOf","module","exports","require","default","d","__webpack_exports__","StaticQuery","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","StaticQueryContext","createContext","Consumer","staticQueryData","object","func","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","json","shape"],"mappings":"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","file":"component---src-pages-index-js-9d59c70e74b12cade4ba.js","sourcesContent":["export const colors = {\n  black: '#111',\n  white: '#fff',\n  darkerGrey: '#222',\n  darkishGrey: '#333',\n  darkGrey: '#3a3a3a',\n  grey: '#444',\n  brightGrey: '#666',\n  darkWhite: '#ddd',\n  orange: '#ff8c00',\n};\n","import { Link } from 'gatsby';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../constants/colors';\n\nconst Header = ({ siteTitle, setCurrentUser, setLoginSuccessful }) => (\n  <header\n    style={{\n      background: colors.black,\n    }}\n  >\n    <Wrapper>\n      <Heading>\n        <Link\n          to=\"/\"\n          onClick={() => {\n            sessionStorage.setItem('tab', 'Welcome');\n            document.location.reload();\n          }}\n          style={{\n            color: colors.white,\n            textDecoration: `none`,\n          }}\n        >\n          {siteTitle}{' '}\n        </Link>\n        <SignOut\n          onClick={() => {\n            sessionStorage.clear();\n            setCurrentUser(undefined);\n            setLoginSuccessful(false);\n          }}\n        >\n          Sign Out\n        </SignOut>\n      </Heading>\n    </Wrapper>\n  </header>\n);\n\nconst Wrapper = styled.div`\n  margin: 0 auto;\n  max-width: 960;\n  padding: 0.3rem 0.5rem;\n`;\nconst Heading = styled.h1`\n  margin: 0;\n  font-size: medium;\n  display: flex;\n  justify-content: space-between;\n`;\nconst SignOut = styled.span`\n  color: white;\n`;\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n};\n\nHeader.defaultProps = {\n  siteTitle: ``,\n};\n\nexport default Header;\n","import axios from 'axios';\n\nexport const get = async (url, token) => {\n  const value = await axios\n    .get(url, {\n      params: {\n        token,\n      },\n    })\n    .then(response => {\n      // console.log('GET-response: ', response);\n\n      return response && response.data;\n    })\n    .catch(error => {\n      console.error('GET-error: ', error);\n      return { error: error };\n    });\n  return value;\n};\n\nexport const create = async (url, body, token) => {\n  const value = await axios\n    .post(url, body, {\n      params: {\n        token,\n      },\n    })\n    .then(response => {\n      console.log('POST-response: ', response);\n      return response && response.data;\n    })\n    .catch(error => {\n      console.error('POST-error: ', error);\n      return { error: error };\n    });\n  return value;\n};\n\nexport const update = async (url, body, token) => {\n  const value = await axios\n    .put(url, body, {\n      params: {\n        token,\n      },\n    })\n    .then(response => {\n      console.log('PUT-response', response);\n      return response && response.data;\n    })\n    .catch(error => {\n      console.error('PUT-error: ', error);\n      return { error: error };\n    });\n\n  return value;\n};\n\nexport const remove = async (url, token) => {\n  const value = await axios\n    .delete(url)\n    .then(response => {\n      console.log('DELETE-response: ', response);\n      return response && response.data;\n    })\n    .catch(error => {\n      console.error('DELETE-error: ', error);\n      return { error: error };\n    });\n  return value;\n};\n","export const apiUrl = process.env.GATSBY_API_URL;\nexport const defaultImageUrl =\n  'https://cdn.iconscout.com/icon/premium/png-256-thumb/human-user-profile-man-face-avatar-51412.png';\n","import React from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\n\nexport const ResizableTextarea = ({\n  value,\n  setValue,\n  rows,\n  setRows,\n  placeholder,\n  id,\n}) => {\n  const minRows = 1;\n  const maxRows = 25;\n\n  const handleChange = event => {\n    const textareaLineHeight = 24;\n\n    const previousRows = event.target.rows;\n    event.target.rows = minRows; // reset number of rows in textarea\n\n    const currentRows = ~~(event.target.scrollHeight / textareaLineHeight);\n\n    if (currentRows === previousRows) {\n      event.target.rows = currentRows;\n    }\n\n    if (currentRows >= maxRows) {\n      event.target.rows = maxRows;\n      event.target.scrollTop = event.target.scrollHeight;\n    }\n    setValue(event.target.value);\n    setRows(currentRows < maxRows ? currentRows : maxRows);\n  };\n\n  return (\n    <Input\n      id={id}\n      placeholder={placeholder}\n      rows={rows}\n      value={value}\n      onChange={handleChange}\n    />\n  );\n};\n\nconst Input = styled.textarea`\n  width: 100%;\n  min-width: 50vw;\n  padding: 0.5rem;\n  background-color: ${colors.darkerGrey};\n  color: ${colors.white};\n  border: none;\n  border-bottom: 1px solid ${colors.white};\n  outline: none;\n  resize: none;\n`;\n","import { useState, useEffect } from 'react';\n\n// Hook\nexport function useKeyPress(targetKey) {\n  // State for keeping track of whether key is pressed\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  // If pressed key is our target key then set to true\n  function downHandler({ key }) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  // If released key is our target key then set to false\n  const upHandler = ({ key }) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  // Add event listeners\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler);\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n  }, []); // Empty array ensures that effect is only run on mount and unmount\n\n  return keyPressed;\n}\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\nimport { create } from '../../utils/api';\nimport { apiUrl } from '../../constants/urls';\nimport { ResizableTextarea } from './ResizableTextarea';\nimport { useKeyPress } from '../../hooks/useKeyPress';\n\nexport const scrollToBottom = (setValue, setRows) => {\n  setTimeout(() => {\n    setValue('');\n    setRows(1);\n    window.scrollTo(0, document.body.scrollHeight);\n  }, 100);\n};\n\nexport const ChatInput = ({ userId, setDbUpdate, dbUpdate, currentUser }) => {\n  const [value, setValue] = useState('');\n  const [rows, setRows] = useState(1);\n  const [doOnce, setDoOnce] = useState(false);\n  const enterPress = useKeyPress('Enter');\n\n  useEffect(() => {\n    setTimeout(() => scrollToBottom(setValue, setRows), 200);\n  }, []);\n\n  if (enterPress && !doOnce && value) {\n    setDoOnce(true);\n    create(\n      `${apiUrl}/messages`,\n      {\n        text: value,\n        user: userId,\n      },\n      currentUser.username\n    ).then(response => {\n      setDbUpdate(!dbUpdate);\n      document.getElementById('ChatInput').focus();\n      setTimeout(() => scrollToBottom(setValue, setRows), 200);\n      setTimeout(() => setDoOnce(false), 1000);\n    });\n  }\n  return (\n    <>\n      <ChatInputWrapper>\n        <ResizableTextarea\n          id=\"ChatInput\"\n          placeholder=\"Message...\"\n          value={value}\n          setValue={setValue}\n          rows={rows}\n          setRows={setRows}\n        />\n        <Button\n          onClick={() => {\n            if (value && !doOnce) {\n              setDoOnce(true);\n              create(\n                `${apiUrl}/messages`,\n                {\n                  text: value,\n                  user: userId,\n                },\n                currentUser.username\n              ).then(response => {\n                setDbUpdate(!dbUpdate);\n                document.getElementById('ChatInput').focus();\n                setTimeout(() => scrollToBottom(setValue, setRows), 200);\n              });\n            }\n          }}\n        >\n          &#x27A3;\n        </Button>\n      </ChatInputWrapper>\n    </>\n  );\n};\n\nconst ChatInputWrapper = styled.div`\n  background-color: ${colors.darkerGrey};\n  padding: 1rem;\n  display: flex;\n  justify-content: space-evenly;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst Button = styled.button`\n  padding: 0.6rem 0.6rem;\n  font-size: 1.5em;\n  border: none;\n  border-radius: 10rem;\n  background-color: ${colors.white};\n  color: ${colors.darkGrey};\n`;\n","import React from 'react';\nimport styled from 'styled-components';\n\nexport const Avatar = ({ image, isVisible, size, margin }) => {\n  return (\n    <AvatarImage\n      isVisible={image && isVisible}\n      margin={margin}\n      src={image}\n      size={size}\n      alt=\"Image unavailable\"\n    />\n  );\n};\n\nconst AvatarImage = styled.img`\n  width: ${p => p.size}rem;\n  height: ${p => p.size}rem;\n  border-radius: 5rem;\n  margin: ${p => p.margin};\n  visibility: ${p => (p.isVisible ? 'visible' : 'hidden')};\n`;\n","import React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\nimport { Avatar } from '../users/Avatar';\nimport { update, remove } from '../../utils/api';\nimport { apiUrl, defaultImageUrl } from '../../constants/urls';\n\nexport const ChatMessage = ({\n  message,\n  isFirstMessage,\n  users,\n  setDbUpdate,\n  dbUpdate,\n  isCurrentUser,\n  currentUser,\n}) => {\n  const wrapperRef = useRef(null);\n  const [clicked, setClicked] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [messageText, setMessageText] = useState(message.text);\n  const user = users && users.find(user => user._id === message.user);\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside, false);\n    return () =>\n      document.removeEventListener('mousedown', handleClickOutside, false);\n  }, []);\n\n  const handleClickOutside = e => {\n    if (\n      wrapperRef.current &&\n      !wrapperRef.current.contains(e.target) &&\n      e.target.id !== 'EditButton'\n    ) {\n      setEditMode(false);\n    }\n  };\n\n  return (\n    <>\n      <ChatMessageWrapper\n        isCurrentUser={isCurrentUser}\n        isFirstMessage={isFirstMessage}\n        ref={wrapperRef}\n      >\n        <Avatar\n          image={(user && user.image) || defaultImageUrl}\n          isVisible={isFirstMessage}\n          margin={`${\n            !isCurrentUser && isFirstMessage\n              ? '1.6rem'\n              : isCurrentUser && isFirstMessage\n              ? '-0.11rem'\n              : 0\n          } 0.5rem 0 0.3rem`}\n          size={2.5}\n        />\n        <div>\n          {!isCurrentUser && isFirstMessage && (\n            <Username>{user && user.username}</Username>\n          )}\n          <Message\n            empty={!message.text || !message.text.trim()}\n            isCurrentUser={isCurrentUser}\n            onClick={() => !editMode && setClicked(!clicked)}\n          >\n            {!editMode && messageText}\n            {editMode && (\n              <EditText\n                value={messageText}\n                onChange={e => {\n                  setMessageText(e.target.value);\n                }}\n              />\n            )}\n            {isCurrentUser && clicked && (\n              <>\n                {!editMode && (\n                  <MessageButton\n                    id=\"EditButton\"\n                    onClick={e => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      setEditMode(true);\n                    }}\n                  >\n                    &#x270E;\n                  </MessageButton>\n                )}\n                {editMode && (\n                  <MessageButton\n                    onClick={e => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      setEditMode(false);\n                      update(\n                        `${apiUrl}/messages/${message._id}`,\n                        {\n                          text: messageText,\n                        },\n                        currentUser.username\n                      ).then(response => {\n                        setDbUpdate(!dbUpdate);\n                      });\n                    }}\n                  >\n                    &#10003;\n                  </MessageButton>\n                )}\n                <MessageButton\n                  onClick={e => {\n                    e.preventDefault();\n                    remove(\n                      `${apiUrl}/messages/${message._id}`,\n                      currentUser.username\n                    ).then(response => {\n                      setDbUpdate(!dbUpdate);\n                    });\n                  }}\n                >\n                  &#x2715;\n                </MessageButton>\n              </>\n            )}\n          </Message>\n          {clicked && (\n            <CreatedAt>\n              {message.createdAt &&\n                new Date(\n                  message.updatedAt ? message.updatedAt : message.createdAt\n                ).toLocaleString()}\n            </CreatedAt>\n          )}\n        </div>\n      </ChatMessageWrapper>\n    </>\n  );\n};\n\nconst ChatMessageWrapper = styled.div`\n  color: ${colors.white};\n  margin: 0;\n  padding: ${p => (p.isFirstMessage ? '1rem' : '0.3rem')} 0.5rem 0 0.5rem;\n  border-radius: 0.3rem;\n  display: flex;\n  flex-direction: ${p => (p.isCurrentUser ? 'row-reverse' : 'row')};\n  max-width: 100%;\n`;\n\nconst Message = styled.p`\n  background-color: ${p =>\n    p.isCurrentUser ? colors.darkishGrey : colors.brightGrey};\n  margin: 0 0.2rem;\n  padding: 0.5rem 0.7rem;\n  display: flex;\n  justify-content: ${p => (p.empty ? 'flex-end' : 'space-between')};\n  align-items: flex-start;\n  border-radius: 1rem;\n  word-break: break-word;\n\n  :hover {\n    background-color: ${colors.brightGrey};\n    cursor: pointer;\n  }\n`;\n\nconst CreatedAt = styled.p`\n  margin: 0 1rem;\n  padding: 0;\n  color: ${colors.brightGrey};\n`;\n\nconst Username = styled.p`\n  margin: 0.1rem 0.8rem;\n  padding: 0;\n  color: ${colors.brightGrey};\n`;\n\nconst MessageButton = styled.span`\n  color: ${colors.white};\n  border-radius: 1rem;\n  margin-left: 0.5rem;\n  padding: 0 0.3rem;\n  :hover {\n    color: ${colors.white};\n  }\n`;\n\nconst EditText = styled.textarea`\n  background-color: inherit;\n  outline: none;\n  color: ${colors.white};\n  margin: 1rem;\n  padding: 1.5rem 0.5rem;\n`;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { get } from '../../utils/api';\nimport { apiUrl } from '../../constants/urls';\nimport { ChatInput } from './ChatInput';\nimport { ChatMessage } from './ChatMessage';\n\nexport const Chat = ({ users, currentUser }) => {\n  const [messages, setMessages] = useState(undefined);\n  const [dbUpdate, setDbUpdate] = useState(false);\n  // const currentUser =\n  //   users &&\n  //   users.find(user => sessionStorage.getItem('username') === user.username);\n\n  useEffect(() => {\n    // if (\n    //   users &&\n    //   Array.isArray(users) &&\n    //   users.length !== 0 &&\n    //   !users.find(user => sessionStorage.getItem('username') === user.username)\n    // ) {\n    //   setLoggedIn(false);\n    // }\n    get(`${apiUrl}/messages`, currentUser.username).then(messages => {\n      setMessages(messages);\n    });\n  }, [dbUpdate]);\n\n  return (\n    <ChatWrapper>\n      <ChatBox>\n        {messages &&\n          Array.isArray(messages) &&\n          messages.map((message, index) => {\n            return (\n              <ChatMessage\n                key={message._id}\n                message={message}\n                isFirstMessage={\n                  index === 0 ? true : messages[index - 1].user !== message.user\n                }\n                users={users}\n                setDbUpdate={setDbUpdate}\n                dbUpdate={dbUpdate}\n                isCurrentUser={currentUser._id === message.user}\n                currentUser={currentUser}\n              />\n            );\n          })}\n        <ChatInput\n          userId={currentUser._id}\n          messages={messages}\n          setMessages={setMessages}\n          setDbUpdate={setDbUpdate}\n          dbUpdate={dbUpdate}\n          currentUser={currentUser}\n        />\n      </ChatBox>\n    </ChatWrapper>\n  );\n};\n\nconst ChatWrapper = styled.div`\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  padding: 0.5rem 0.8rem 4rem;\n`;\nconst ChatBox = styled.div`\n  min-height: 50vh;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\n\nexport const LoginInput = ({ placeholder, type, value, setValue }) => {\n  return (\n    <Input\n      placeholder={placeholder}\n      type={type}\n      value={value}\n      onChange={e => setValue(e.target.value)}\n    />\n  );\n};\n\nconst Input = styled.input`\n  display: flex;\n  background-color: ${colors.darkerGrey};\n  border: none;\n  border-bottom: 1px solid ${colors.white};\n  outline: none;\n  color: ${colors.white};\n  margin: 1rem;\n  padding: 0.5rem;\n`;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport { get, update } from '../../utils/api';\nimport { LoginInput } from './LoginInput';\nimport { colors } from '../../constants/colors';\nimport { apiUrl } from '../../constants/urls';\n\nexport const LoginForm = ({\n  setCurrentUser,\n  setSignup,\n  signUpSuccessful,\n  setLoginSuccessful,\n}) => {\n  const [showLogin, setShowLogin] = useState(false);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [users, setUsers] = useState('');\n  const [loginAttempt, setLoginAttempt] = useState(0);\n\n  useEffect(() => {\n    setTimeout(() => setShowLogin(true), 200);\n  }, []);\n  useEffect(() => {\n    get(`${apiUrl}/users`).then(users => {\n      if (users.error) return;\n      setUsers(users);\n    });\n  }, [loginAttempt]);\n\n  return (\n    <LoginFormWrapper>\n      {showLogin && (\n        <>\n          <h1>Login</h1>\n          <LoginInput\n            placeholder=\"Username\"\n            type=\"text\"\n            value={username}\n            setValue={setUsername}\n          />\n          <LoginInput\n            placeholder=\"Password\"\n            type=\"password\"\n            value={password}\n            setValue={setPassword}\n          />\n          <LoginButton\n            onClick={() => {\n              HandleLogin(\n                username,\n                password,\n                setCurrentUser,\n                users,\n                setLoginSuccessful\n              );\n              setTimeout(() => setLoginAttempt(loginAttempt + 1), 200);\n            }}\n          >\n            Login\n          </LoginButton>\n          {loginAttempt > 0 && (\n            <p style={{ color: 'red' }}>Invalid login ({loginAttempt})</p>\n          )}\n          {!signUpSuccessful && (\n            <p>\n              Sign up <Signup onClick={() => setSignup(true)}>here</Signup>\n            </p>\n          )}\n          <br />\n          {signUpSuccessful && (\n            <p>\n              Sign up successful! You can now log in with your new username and\n              password.\n            </p>\n          )}\n        </>\n      )}\n    </LoginFormWrapper>\n  );\n};\n\nconst LoginFormWrapper = styled.div`\n  margin-top: 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 20rem;\n  text-align: center;\n`;\n\nconst LoginButton = styled.button`\n  background-color: ${colors.darkerGrey};\n  color: ${colors.white};\n  padding: 0.5rem 3rem;\n  margin: 1rem;\n\n  :hover {\n    background-color: ${colors.grey};\n    cursor: pointer;\n  }\n`;\n\nconst Signup = styled.span`\n  color: orange;\n\n  :hover {\n    color: white;\n    cursor: pointer;\n  }\n`;\n\nconst HandleLogin = (\n  username = process.env.MOCK_USER,\n  password = process.env.MOCK_PASSWORD,\n  setCurrentUser,\n  users,\n  setLoginSuccessful\n) => {\n  sessionStorage.clear();\n  const currentUser =\n    users &&\n    users.find(\n      user => user.username === username && user.password === password\n    );\n  if (currentUser) {\n    sessionStorage.setItem('username', username);\n    sessionStorage.setItem('password', password);\n    update(\n      `${apiUrl}/users/${currentUser._id}`,\n      {\n        ...currentUser,\n        updatedAt: new Date(),\n      },\n      currentUser.username\n    ).then(response => {\n      setLoginSuccessful(true);\n      setCurrentUser(currentUser);\n    });\n  } else {\n    setCurrentUser(undefined);\n  }\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport {defaultImageUrl} from '../../constants/urls';\nimport { Avatar } from '../users/Avatar';\n\nexport const Welcome = ({ currentUser }) => (\n  <WelcomeWrapper>\n    <Avatar\n      image={currentUser.image || defaultImageUrl}\n      isVisible={true}\n      margin={'0 0.5rem 0 0'}\n      size={10}\n    />\n    <br />\n    <br />\n    <h2>Welcome {currentUser.username}</h2>\n    <p>\n      In the tabs above you can see other registered users, <br />\n      use MyChat as well as sign out.\n    </p>\n  </WelcomeWrapper>\n);\n\nconst WelcomeWrapper = styled.div`\n  padding: 5rem;\n  text-align: center;\n`;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nexport default class Draggable extends React.Component {\n  state = {\n    isDragging: false,\n\n    originalX: 0,\n    originalY: 0,\n\n    translateX: 0,\n    translateY: 0,\n\n    lastTranslateX: 0,\n    lastTranslateY: 0,\n  };\n\n  componentWillUnmount() {\n    window.removeEventListener('mousemove', this.handleMouseMove);\n    window.removeEventListener('mouseup', this.handleMouseUp);\n    window.removeEventListener('touchmove', this.handleTouchMove);\n    window.removeEventListener('touchend', this.handleTouchEnd);\n  }\n\n  handleTouchStart = (e, axis) => {\n    if (!e.touches[0]) return;\n    e.stopPropagation();\n    e.preventDefault();\n    window.addEventListener('touchmove', e => this.handleTouchMove(e, axis));\n    window.addEventListener('touchend', this.handleTouchEnd);\n\n    if (this.props.onDragStart) {\n      // console.log(e.touches[0]);\n      this.props.onDragStart({\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY,\n      });\n    }\n\n    this.setState({\n      originalX: e.touches[0].clientX,\n      originalY: e.touches[0].clientY,\n      isDragging: true,\n    });\n  };\n\n  moveAlongAxis = (e, axis) => {\n    const { onDrag } = this.props;\n\n    this.setState(\n      prevState => ({\n        ['translate' + axis]:\n          e.touches[0]['client' + axis] -\n          prevState['original' + axis] +\n          prevState['lastTranslate' + axis],\n      }),\n      () => {\n        if (onDrag) {\n          onDrag({\n            [axis.toLowerCase()]: this.state['translate' + axis],\n            ['lastTranslate' + axis]: this.state['lastTranslate' + axis],\n            ['original' + axis]: this.state['original' + axis],\n          });\n        }\n      }\n    );\n  };\n\n  handleTouchMove = (e, axis) => {\n    if (!e.touches[0]) return;\n    e.stopPropagation();\n    e.preventDefault();\n    const { isDragging } = this.state;\n\n    if (!isDragging) {\n      return;\n    }\n\n    switch (axis) {\n      case 'X':\n        this.moveAlongAxis(e, 'X');\n        break;\n      case 'Y':\n        this.moveAlongAxis(e, 'Y');\n        break;\n      default:\n        this.moveAlongAxis(e, 'X');\n        this.moveAlongAxis(e, 'Y');\n        return;\n    }\n  };\n\n  handleTouchEnd = e => {\n    e.stopPropagation();\n    window.removeEventListener('touchmove', this.handleTouchMove);\n    window.removeEventListener('touchend', this.handleTouchEnd);\n\n    this.setState(\n      {\n        originalX: 0,\n        originalY: 0,\n        translateX: 0,\n        translateY: 0,\n        lastTranslateX: 0,\n        lastTranslateY: 0,\n        isDragging: false,\n      },\n      () => {\n        if (this.props.onDragEnd) {\n          this.props.onDragEnd({\n            x: this.state.lastTranslateX,\n            y: this.state.lastTranslateY,\n          });\n        }\n      }\n    );\n  };\n\n  handleMouseDown = ({ clientX, clientY }) => {\n    window.addEventListener('mousemove', this.handleMouseMove);\n    window.addEventListener('mouseup', this.handleMouseUp);\n\n    if (this.props.onDragStart) {\n      this.props.onDragStart();\n    }\n\n    this.setState({\n      originalX: clientX,\n      originalY: clientY,\n      isDragging: true,\n    });\n  };\n\n  handleMouseMove = ({ clientX, clientY }) => {\n    const { isDragging } = this.state;\n    const { onDrag } = this.props;\n\n    if (!isDragging) {\n      return;\n    }\n\n    this.setState(\n      prevState => ({\n        translateX: clientX - prevState.originalX + prevState.lastTranslateX,\n        translateY: clientY - prevState.originalY + prevState.lastTranslateY,\n      }),\n      () => {\n        if (onDrag) {\n          onDrag({\n            translateX: this.state.translateX,\n            translateY: this.state.translateY,\n          });\n        }\n      }\n    );\n  };\n\n  handleMouseUp = () => {\n    window.removeEventListener('mousemove', this.handleMouseMove);\n    window.removeEventListener('mouseup', this.handleMouseUp);\n\n    this.setState(\n      {\n        originalX: 0,\n        originalY: 0,\n        lastTranslateX: this.state.translateX,\n        lastTranslateY: this.state.translateY,\n\n        isDragging: false,\n      },\n      () => {\n        if (this.props.onDragEnd) {\n          this.props.onDragEnd();\n        }\n      }\n    );\n  };\n\n  render() {\n    const { children, draggableStyle } = this.props;\n    const { translateX, translateY, isDragging } = this.state;\n    return (\n      <Container\n        onMouseDown={this.handleMouseDown}\n        onTouchStart={e => {\n          this.handleTouchStart(e, 'Y');\n        }}\n        x={translateX}\n        y={translateY}\n        isDragging={isDragging}\n        style={draggableStyle}\n      >\n        {children}\n      </Container>\n    );\n  }\n}\n\nconst Container = styled.div.attrs({\n  style: ({ x, y }) => ({\n    transform: `translate(${x}px, ${y}px)`,\n  }),\n})`\n  padding: 0 !important;\n  margin: 0;\n  touch-action: none;\n  cursor: grab;\n  transition: color 0.3s ease-out;\n  transition: opacity 0.3s ease-out;\n\n  ${({ isDragging }) =>\n    isDragging\n      ? css`\n          position: relative;\n          z-index: 2500;\n          color: orange;\n          opacity: 0.8;\n          cursor: grabbing;\n        `\n      : css`\n          z-index: 40;\n        `};\n`;\n","export const checkIsMobile = () => {\n  if (typeof document !== `undefined`) {\n    return 'ontouchstart' in document.documentElement === true;\n  }\n  return false;\n};\n\nexport const prepend = (value, array) => {\n  var newArray = array.slice();\n  newArray.unshift(value);\n  return newArray;\n};\n\nexport const pad = (num, size) => {\n  var s = '000000000' + num;\n  return s.substr(s.length - size);\n};\n\nexport const formatDateTime = (dt, hideTime) => {\n  if (!dt) return '--/--/----';\n  const dateTime = new Date(dt);\n  const date = dateTime.toLocaleDateString();\n  const hour = dateTime.getHours();\n  const minute = dateTime.getMinutes();\n  return `${date}${hideTime ? '' : ` - ${pad(hour, 2)}:${pad(minute, 2)}`}`;\n};\n\nexport const uuidv4 = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = (Math.random() * 16) | 0,\n      v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\n\nimport { apiUrl } from '../../constants/urls';\nimport { colors } from '../../constants/colors';\nimport { formatDateTime } from '../../utils/helpers';\nimport { remove, update } from '../../utils/api';\n\nexport const Habit = ({ habit, addOccasion, deleteHabit, currentUser }) => {\n  const { name, title, description: desc, rank, occasions: occ } = habit;\n  const [occasions, setOccasions] = useState(occ);\n  const [expandedView, setExpandedView] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const [editDescription, setEditDescription] = useState(false);\n  const [temporaryDescription, setTemporaryDescription] = useState(desc);\n  const [description, setDescription] = useState(desc);\n  const [showNote, setShowNote] = useState(false);\n  const [note, setNote] = useState('');\n\n  const onUpdateOccasion = (id, note) => {\n    occasions &&\n      setOccasions(\n        occasions.map(o => {\n          if (o._id === id) {\n            return { ...o, note: note };\n          } else {\n            return o;\n          }\n        })\n      );\n    update(\n      `${apiUrl}/habits/${habit._id}`,\n      {\n        ...habit,\n        occasions: occasions\n          ? occasions.map(o => {\n              if (o._id === id) {\n                return { ...o, note: note };\n              } else {\n                return o;\n              }\n            })\n          : [],\n      },\n      currentUser.username\n    );\n  };\n  const onDeleteOccasion = id => {\n    occasions && setOccasions(occasions.filter(o => o._id !== id));\n    update(\n      `${apiUrl}/habits/${habit._id}`,\n      {\n        ...habit,\n        occasions: occasions ? occasions.filter(o => o._id !== id) : [],\n      },\n      currentUser.username\n    );\n  };\n\n  return (\n    <Container id={name}>\n      <HabitWrapper>\n        <Row onClick={() => setExpandedView(!expandedView)}>\n          <TopInfoLeft>\n            <Rank>{rank}</Rank>\n            <TitleTimeWrapper>\n              <Title>{title}</Title>\n              <Time>\n                {occasions.length !== 0 &&\n                  formatDateTime(occasions[0].time, true)}\n              </Time>\n            </TitleTimeWrapper>\n          </TopInfoLeft>\n          <TopInfoRight>\n            <div>\n              {!showNote && (\n                <Add\n                  onClick={e => {\n                    e.stopPropagation();\n                    setShowNote(true);\n                  }}\n                >\n                  &#x2b;\n                </Add>\n              )}\n              {showNote && (\n                <>\n                  <Add\n                    onClick={e => {\n                      e.stopPropagation();\n                      addOccasion(name, note);\n                      setShowNote(false);\n                    }}\n                  >\n                    &#10003;\n                  </Add>\n                  <Add\n                    onClick={e => {\n                      e.stopPropagation();\n                      setShowNote(false);\n                    }}\n                  >\n                    &#x2715;\n                  </Add>\n                </>\n              )}\n              {expandedView && (\n                <Delete\n                  onClick={e => {\n                    e.preventDefault();\n                    remove(\n                      `${apiUrl}/habits/${habit._id}`,\n                      currentUser.username\n                    ).then(response => {\n                      deleteHabit(habit._id);\n                    });\n                  }}\n                >\n                  &#x2715;\n                </Delete>\n              )}\n            </div>\n          </TopInfoRight>\n        </Row>\n        {showNote && (\n          <Row>\n            <ExpandedContent style={{ width: '100%' }}>\n              <LargeNoteInput onChange={e => setNote(e.target.value)} />\n            </ExpandedContent>\n          </Row>\n        )}\n        {expandedView && (\n          <ExpandedContent>\n            {!editDescription && (\n              <Description onClick={() => setEditDescription(true)}>\n                {description}\n              </Description>\n            )}\n            {editDescription && (\n              <EditWrapper>\n                <EditDescription\n                  value={temporaryDescription}\n                  onChange={e => setTemporaryDescription(e.target.value)}\n                />\n                <ButtonWrapper>\n                  <EditButton\n                    onClick={() => {\n                      if (temporaryDescription === '') {\n                        setTemporaryDescription('Enter description here...');\n                      }\n                      setDescription(\n                        temporaryDescription === ''\n                          ? 'Enter description here...'\n                          : temporaryDescription\n                      );\n                      update(\n                        `${apiUrl}/habits/${habit._id}`,\n                        { ...habit, description: temporaryDescription },\n                        currentUser.username\n                      );\n                      setEditDescription(false);\n                    }}\n                  >\n                    Save\n                  </EditButton>\n                  <EditButton\n                    onClick={() => {\n                      setEditDescription(false);\n                      setTemporaryDescription(description);\n                    }}\n                  >\n                    Cancel\n                  </EditButton>\n                </ButtonWrapper>\n              </EditWrapper>\n            )}\n            {occasions.length !== 0 && (\n              <UL>\n                {showHistory ? (\n                  <>\n                    {occasions.map(\n                      (occasion, index) =>\n                        index < 10 && (\n                          <Occasion\n                            occasion={occasion}\n                            index={index}\n                            onUpdateOccasion={onUpdateOccasion}\n                            onDeleteOccasion={onDeleteOccasion}\n                          />\n                        )\n                    )}\n                    <LI\n                      onClick={e => {\n                        e.stopPropagation();\n                        setShowHistory(false);\n                      }}\n                    >\n                      <SlimButton>Hide history</SlimButton>\n                    </LI>\n                  </>\n                ) : (\n                  <LI\n                    onClick={e => {\n                      e.stopPropagation();\n                      setShowHistory(true);\n                    }}\n                  >\n                    <SlimButton>Show history</SlimButton>\n                  </LI>\n                )}\n              </UL>\n            )}\n          </ExpandedContent>\n        )}\n      </HabitWrapper>\n    </Container>\n  );\n};\n\nconst Button = styled.button`\n  background-color: ${colors.brightGrey};\n  border: none;\n  color: ${colors.white};\n`;\n\nconst Container = styled.div`\n  display: flex;\n  padding: 0.6rem;\n`;\n\nconst HabitWrapper = styled.div`\n  cursor: pointer;\n  width: 100%;\n  min-width: 16rem;\n`;\n\nconst TopInfoLeft = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst TopInfoRight = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 0;\n  margin: 0;\n`;\n\nconst Rank = styled.span`\n  border: 1px solid ${colors.white};\n  border-radius: 5rem;\n  padding: 0.2rem 0.6rem;\n  margin-right: 0.5rem;\n  margin-top: -0.3rem;\n`;\n\nconst TitleTimeWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\nconst Title = styled.label`\n  color: ${colors.white};\n  margin-right: 0.5rem;\n  line-height: 1rem;\n`;\nconst Time = styled.label`\n  color: ${colors.orange};\n  font-size: small;\n`;\n\nconst Add = styled(Button)`\n  margin-left: 0.5rem;\n  padding: 0.2rem 0.8rem 0;\n  border-radius: 0.2rem;\n  opacity: 0.8;\n\n  :hover {\n    cursor: pointer;\n    opacity: 1;\n  }\n`;\n\nconst Description = styled.p`\n  margin: 0.5rem 0;\n`;\n\nconst EditWrapper = styled.div`\n  display: flex;\n  margin: 0.5rem 0;\n  min-height: 8rem;\n`;\n\nconst EditDescription = styled.textarea`\n  border: 1px solid ${colors.brightGrey};\n  padding: 0.5rem;\n  background: inherit;\n  color: ${colors.darkWhite};\n  width: 100%;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: space-between;\n  min-height: 8rem;\n`;\nconst EditButton = styled(Button)`\n  height: 49%;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst UL = styled.ul`\n  list-style: none;\n  padding-left: 0;\n  margin: 0;\n`;\nconst LI = styled.li`\n  font-size: small;\n  margin: 0;\n  padding: 0;\n`;\n\nconst Em = styled.span`\n  color: ${colors.orange};\n`;\n\nconst SlimButton = styled.span`\n  :hover {\n    color: ${colors.orange};\n  }\n`;\n\nconst ExpandedContent = styled.div`\n  margin-top: 0.5rem;\n  border-top: 1px solid #3b3b3b;\n`;\n\nconst Delete = styled(Add)`\n  background-color: #a40000;\n`;\n\nconst DeleteSymbol = styled(Add)`\n  background-color: inherit;\n  padding: 0;\n  margin: 0;\n  margin-left: 0.5rem;\n`;\n\nconst NoteInput = styled.input`\n  background-color: inherit;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid ${colors.orange};\n  color: ${colors.orange};\n`;\n\nconst LargeNoteInput = styled(NoteInput)`\n  width: 100%;\n`;\n\nconst Occasion = ({ occasion, index, onUpdateOccasion, onDeleteOccasion }) => {\n  const [showEdit, setShowEdit] = useState(false);\n  const [note, setNote] = useState(occasion.note);\n\n  return (\n    <LI\n      key={occasion.time + '-' + index}\n      onClick={e => {\n        e.stopPropagation();\n        setShowEdit(!showEdit);\n        showEdit && onUpdateOccasion(occasion._id, note);\n      }}\n    >\n      <Em>\n        {formatDateTime(occasion.time)}\n        {occasion.note && ':'}\n      </Em>{' '}\n      {!showEdit && occasion.note}\n      {showEdit && (\n        <>\n          <NoteInput\n            value={note}\n            onClick={e => e.stopPropagation()}\n            onChange={e => setNote(e.target.value)}\n          />\n          <DeleteSymbol\n            onClick={e => {\n              e.stopPropagation();\n              onDeleteOccasion(occasion._id);\n            }}\n          >\n            &#x2715;\n          </DeleteSymbol>\n        </>\n      )}\n    </LI>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport Draggable from './Draggable';\nimport { colors } from '../../constants/colors';\nimport { Habit } from '../habits/Habit';\nimport { prepend, uuidv4 } from '../../utils/helpers';\n\nconst offset = el => {\n  const rect = el.getBoundingClientRect();\n  const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n  return { top: rect.top + scrollTop, left: rect.left + scrollLeft };\n};\n\nconst compare = (a, b) => {\n  if (a.rank < b.rank) {\n    return -1;\n  }\n  if (a.rank > b.rank) {\n    return 1;\n  }\n  return 0;\n};\n\nexport const DraggableList = ({\n  listData,\n  onListUpdate,\n  currentUser,\n  setListOrder,\n}) => {\n  const [list, setList] = useState(listData || ['hello']);\n  const [translatePosition, setTranslatePosition] = useState({});\n  const [, setOriginalPosition] = useState({});\n  const [dropY, setDropY] = useState(0);\n  const [currentDrop, setCurrentDrop] = useState(undefined);\n  // const [axis] = useState('Y');\n\n  useEffect(() => {\n    setList(listData);\n  }, [listData]);\n\n  const handleDragStart = (position, name) => {\n    if (!position) return;\n    setOriginalPosition({\n      name,\n      ...position,\n    });\n  };\n\n  const onAddOccasion = (name, note) => {\n    onListUpdate(\n      list.map(l => {\n        if (l.name === name) {\n          return {\n            ...l,\n            occasions: prepend(\n              { _id: uuidv4(), time: new Date(), note },\n              l.occasions\n            ),\n          };\n        } else {\n          return l;\n        }\n      })\n    );\n  };\n\n  const onDeleteHabit = id => {\n    onListUpdate(\n      list\n        .filter(l => l._id !== id)\n        .map((l, index) => ({ ...l, rank: index + 1 }))\n    );\n  };\n\n  const handleDrag = (position, name) => {\n    document.getElementById(name) &&\n      setDropY(offset(document.getElementById(name)).top);\n    setTranslatePosition({\n      name,\n      ...position,\n    });\n  };\n\n  // index, currentIndex, amount\n  const moveRank = (tasks, t, index, currentIndex) => {\n    const elementY = offset(document.getElementById(t.name)).top;\n    if (index > currentIndex) {\n      if (elementY < dropY) {\n        setCurrentDrop({ ...tasks[currentIndex], rank: t.rank });\n        return { ...t, rank: t.rank - 1 };\n      }\n      return t;\n    } else if (index < currentIndex) {\n      if (elementY > dropY) {\n        if (\n          index - 1 < 0 ||\n          dropY > offset(document.getElementById(tasks[index - 1].name)).top\n        ) {\n          setCurrentDrop({\n            ...tasks[currentIndex],\n            rank: t.rank,\n            topValue: true,\n          });\n        }\n        return { ...t, rank: t.rank + 1 };\n      }\n      return t;\n    } else {\n      console.log('Moved: ', t.name);\n      return t;\n    }\n  };\n\n  const handleDragEnd = position => {\n    const currentIndex = list.findIndex(t => t.name === position.name);\n    const rankedList = list.map((t, i) => moveRank(list, t, i, currentIndex));\n    setList(rankedList);\n    setListOrder(rankedList);\n  };\n\n  useEffect(() => {\n    if (currentDrop) {\n      const currentDropList = list.map(t =>\n        t.name === currentDrop.name ? currentDrop : t\n      );\n      setList(currentDropList);\n      setListOrder(currentDropList);\n    }\n  }, [currentDrop]);\n  const sortedTasks = list.sort(compare);\n\n  return (\n    <>\n      {sortedTasks &&\n        sortedTasks.map(t => (\n          <Draggable\n            key={t.name}\n            onDragStart={position => handleDragStart(position, t.name)}\n            onDrag={position => handleDrag(position, t.name)}\n            onDragOver={e => e.preventDefault()}\n            onDragEnd={() => handleDragEnd(translatePosition)}\n            draggableStyle={{\n              backgroundColor: colors.darkishGrey,\n              margin: '1rem 0',\n              padding: '1rem',\n              width: '100%',\n              zIndex: '20',\n            }}\n          >\n            <Habit\n              habit={t}\n              addOccasion={onAddOccasion}\n              deleteHabit={onDeleteHabit}\n              currentUser={currentUser}\n            />\n          </Draggable>\n        ))}\n    </>\n  );\n};\n\nDraggableList.defaultProps = {\n  listData: [],\n  onListUpdate: () => {},\n};\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\nimport { create, get, update } from '../../utils/api';\nimport { apiUrl } from '../../constants/urls';\nimport { DraggableList } from '../draggable/DraggableList';\nimport { ResizableTextarea } from '../chat/ResizableTextarea';\nimport { scrollToBottom } from '../chat/ChatInput';\nimport { useKeyPress } from '../../hooks/useKeyPress';\n\nconst HabitsWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin: 0 0.5rem;\n  align-items: center;\n`;\n\nconst ListContainer = styled.div`\n  width: 100%;\n`;\n\nconst Button = styled.button`\n  background-color: ${p => (p.selected ? colors.brightGrey : colors.darkGrey)};\n  color: ${colors.white};\n  width: 50%;\n  padding: 0.8rem 0;\n  border: none;\n\n  :hover {\n    background-color: ${colors.brightGrey};\n    cursor: pointer;\n  }\n\n  :active {\n    background-color: ${p =>\n      p.selected ? colors.brightGrey : colors.darkGrey};\n  }\n`;\n\nexport const Habits = ({ users, currentUser }) => {\n  const [listOrder, setListOrder] = useState([]);\n  const [doOnce, setDoOnce] = useState(false);\n  const [value, setValue] = useState('');\n  const [rows, setRows] = useState(1);\n  const enterPress = useKeyPress('Enter');\n\n  useEffect(() => {\n    if (!currentUser) return;\n    get(`${apiUrl}/habits`, currentUser.username).then(habits => {\n      setListOrder(habits);\n    });\n  }, []);\n\n  const onListUpdate = list => {\n    list.forEach(h => {\n      update(`${apiUrl}/habits/${h._id}`, h, currentUser.username);\n    });\n    setListOrder(list);\n  };\n\n  const onCreateHabit = h => {\n    create(`${apiUrl}/habits`, h, currentUser.username).then(response => {\n      get(`${apiUrl}/habits`, currentUser.username).then(habits => {\n        setListOrder(habits);\n      });\n      document.getElementById('HabitInput').focus();\n      setTimeout(() => scrollToBottom(setValue, setRows), 200);\n      setTimeout(() => setDoOnce(false), 1000);\n    });\n  };\n\n  const habitList = listOrder.map(habit => {\n    return (\n      habit && {\n        name: habit.title && habit.title.toLowerCase(),\n        ...habit,\n      }\n    );\n  });\n  if (enterPress && !doOnce && value) {\n    setDoOnce(true);\n    onCreateHabit({\n      title: value,\n      description: 'Enter description here...',\n      startDate: new Date(),\n      endDate: new Date(),\n      occasions: [],\n      rank: listOrder.length + 1,\n    });\n  }\n  return (\n    <HabitsWrapper>\n      <ListContainer>\n        {habitList.length > 0 && (\n          <DraggableList\n            listData={habitList}\n            onListUpdate={onListUpdate}\n            setListOrder={setListOrder}\n            currentUser={currentUser}\n          />\n        )}\n      </ListContainer>\n      <SaveOrderButton onClick={() => onListUpdate(listOrder)}>\n        Save order\n      </SaveOrderButton>\n      <InputWrapper>\n        <ResizableTextarea\n          id=\"HabitInput\"\n          placeholder=\"New habit...\"\n          value={value}\n          setValue={setValue}\n          rows={rows}\n          setRows={setRows}\n        />\n        <InputButton\n          onClick={() => {\n            setDoOnce(true);\n            !doOnce &&\n              onCreateHabit({\n                title: value,\n                description: 'Enter description here...',\n                startDate: new Date(),\n                endDate: new Date(),\n                occasions: [],\n                rank: listOrder.length + 1,\n              });\n            setTimeout(() => scrollToBottom(setValue, setRows), 200);\n            setTimeout(() => setDoOnce(false), 1000);\n          }}\n        >\n          &#x27A3;\n        </InputButton>\n      </InputWrapper>\n    </HabitsWrapper>\n  );\n};\n\nconst InputWrapper = styled.div`\n  background-color: ${colors.darkerGrey};\n  padding: 1rem;\n  display: flex;\n  justify-content: space-evenly;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst SaveOrderButton = styled(Button)`\n  margin-bottom: 5rem;\n`;\n\nconst InputButton = styled.button`\n  padding: 0.6rem 0.6rem;\n  font-size: 1.5em;\n  border: none;\n  border-radius: 10rem;\n  background-color: ${colors.white};\n  color: ${colors.darkGrey};\n`;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport { get, create } from '../../utils/api';\nimport { LoginInput } from '../login/LoginInput';\nimport { Avatar } from '../users/Avatar';\nimport { colors } from '../../constants/colors';\nimport { apiUrl, defaultImageUrl } from '../../constants/urls';\n\nexport const SignupForm = ({ setSignup, setSignUpSuccessful }) => {\n  const [showSignup, setShowSignup] = useState(false);\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [location, setLocation] = useState('');\n  const [image, setImage] = useState('');\n  const [users, setUsers] = useState('');\n  const [signupAttempt, setSignupAttempt] = useState(0);\n\n  useEffect(() => {\n    setTimeout(() => setShowSignup(true), 200);\n  }, []);\n  useEffect(() => {\n    get(`${apiUrl}/users`, 'Unauthorized').then(users => {\n      setUsers(users);\n    });\n  }, [signupAttempt]);\n\n  return (\n    <SignupFormWrapper>\n      {showSignup && (\n        <>\n          <h1>Sign Up</h1>\n          <LoginInput\n            placeholder=\"Username\"\n            type=\"text\"\n            value={username}\n            setValue={setUsername}\n          />\n          <LoginInput\n            placeholder=\"E-mail\"\n            type=\"text\"\n            value={email}\n            setValue={setEmail}\n          />\n          <LoginInput\n            placeholder=\"Password\"\n            type=\"password\"\n            value={password}\n            setValue={setPassword}\n          />\n          <LoginInput\n            placeholder=\"First name\"\n            type=\"text\"\n            value={firstname}\n            setValue={setFirstname}\n          />\n          <LoginInput\n            placeholder=\"Last name\"\n            type=\"text\"\n            value={lastname}\n            setValue={setLastname}\n          />\n          <LoginInput\n            placeholder=\"Location\"\n            type=\"text\"\n            value={location}\n            setValue={setLocation}\n          />\n          <LoginInput\n            placeholder=\"Image url\"\n            type=\"text\"\n            value={image}\n            setValue={setImage}\n          />\n          <Avatar\n            image={image || defaultImageUrl}\n            isVisible={true}\n            margin={'0 auto 2rem'}\n            size={10}\n          />\n          <SignupButton\n            onClick={() => {\n              setSignupAttempt(signupAttempt + 1);\n              HandleSignup(\n                {\n                  username,\n                  email,\n                  password,\n                  firstname,\n                  lastname,\n                  location,\n                  image,\n                },\n                users,\n                setSignUpSuccessful\n              );\n              sessionStorage.clear();\n              setSignup(false);\n            }}\n          >\n            Sign Up\n          </SignupButton>\n          {signupAttempt > 0 && (\n            <p style={{ color: 'red' }}>Invalid sign up ({signupAttempt})</p>\n          )}\n        </>\n      )}\n    </SignupFormWrapper>\n  );\n};\n\nconst SignupFormWrapper = styled.div`\n  display: flex;\n  text-align: center;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst SignupButton = styled.button`\n  background-color: ${colors.darkerGrey};\n  color: ${colors.white};\n  padding: 0.5rem 3rem;\n  margin: 1rem;\n\n  :hover {\n    background-color: ${colors.grey};\n    cursor: pointer;\n  }\n`;\n\nconst HandleSignup = (signupData, users, setSignUpSuccessful) => {\n  if (\n    users &&\n    users.find(\n      user =>\n        user.username === signupData.username || user.email === signupData.email\n    )\n  ) {\n    return undefined;\n  } else {\n    create(`${apiUrl}/users`, signupData, 'Unauthorized').then(response => {\n      console.log('USER-CREATE-response: ', response);\n    });\n    setSignUpSuccessful(true);\n  }\n};\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\n\nimport { update } from '../../utils/api';\nimport { colors } from '../../constants/colors';\nimport { Avatar } from './Avatar';\nimport { apiUrl, defaultImageUrl } from '../../constants/urls';\n\nexport const User = ({ user, isCurrentUser, updateUsers, setUpdateUsers }) => {\n  const [expandedView, setExpandedView] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [username, setUsername] = useState(user.username);\n  const [firstname, setFirstname] = useState(user.firstname);\n  const [lastname, setLastname] = useState(user.lastname);\n  const [location, setLocation] = useState(user.location);\n  const [image, setImage] = useState(user.image);\n\n  return (\n    <UserWrapper\n      isCurrentUser={isCurrentUser}\n      expandedView={expandedView}\n      onClick={() => !editMode && setExpandedView(!expandedView)}\n    >\n      <AvatarWrapper>\n        <Avatar\n          image={user.image || defaultImageUrl}\n          isVisible={true}\n          margin={'0 0.5rem 0 0'}\n          size={expandedView ? 5 : 3}\n        />\n        <Username>{username}</Username>\n        {!editMode && isCurrentUser && (\n          <MessageButton\n            id=\"EditButton\"\n            onClick={e => {\n              e.preventDefault();\n              e.stopPropagation();\n              setExpandedView(true);\n              setEditMode(true);\n            }}\n          >\n            &#x270E;\n          </MessageButton>\n        )}\n        {editMode && (\n          <>\n            <MessageButton\n              onClick={() => {\n                setEditMode(false);\n                setUsername(user.username);\n                setFirstname(user.firstname);\n                setLastname(user.lastname);\n                setLocation(user.location);\n                setImage(user.image);\n              }}\n            >\n              Back &#8592;\n            </MessageButton>\n            <MessageButton\n              onClick={e => {\n                e.preventDefault();\n                e.stopPropagation();\n                setEditMode(false);\n                update(\n                  `${apiUrl}/users/${user._id}`,\n                  {\n                    ...user,\n                    username,\n                    firstname,\n                    lastname,\n                    location,\n                    image,\n                  },\n                  user.username\n                ).then(response => {\n                  sessionStorage.setItem('username', username);\n                  setUpdateUsers(!updateUsers);\n                });\n              }}\n            >\n              Save &#10003;\n            </MessageButton>\n          </>\n        )}\n      </AvatarWrapper>\n      {expandedView && (\n        <>\n          {!editMode && (\n            <>\n              <Info>\n                <EditLabel>Full name:</EditLabel> {firstname} {lastname}\n              </Info>\n              <Info>\n                <EditLabel>Location:</EditLabel> {location}\n              </Info>\n              <Info>\n                <EditLabel>Signed up:</EditLabel>{' '}\n                {new Date(user.createdAt).toLocaleString()}\n              </Info>\n              <Info>\n                <EditLabel>Latest log in:</EditLabel>{' '}\n                {new Date(user.updatedAt).toLocaleString()}\n              </Info>\n            </>\n          )}\n          {editMode && (\n            <EditWrapper>\n              <EditLabel>Username</EditLabel>\n              <EditText\n                value={username}\n                onChange={e => {\n                  setUsername(e.target.value);\n                }}\n              />\n              <EditLabel>First name</EditLabel>\n              <EditText\n                value={firstname}\n                onChange={e => {\n                  setFirstname(e.target.value);\n                }}\n              />\n              <EditLabel>Last name</EditLabel>\n              <EditText\n                value={lastname}\n                onChange={e => {\n                  setLastname(e.target.value);\n                }}\n              />\n              <EditLabel>Location</EditLabel>\n              <EditText\n                value={location}\n                onChange={e => {\n                  setLocation(e.target.value);\n                }}\n              />\n              <EditLabel>Image URL</EditLabel>\n              <EditText\n                value={image}\n                onChange={e => {\n                  setImage(e.target.value);\n                }}\n              />\n              <Avatar\n                image={image || defaultImageUrl}\n                isVisible={true}\n                margin={'0 auto'}\n                size={10}\n              />\n            </EditWrapper>\n          )}\n        </>\n      )}\n    </UserWrapper>\n  );\n};\n\nconst UserWrapper = styled.div`\n  background-color: ${p =>\n    p.isCurrentUser ? colors.brightGrey : colors.darkGrey};\n  padding: ${p => (p.expandedView ? '1rem 0.6rem' : '0 0.5rem')};\n  margin: 0.5rem auto;\n  width: 100%;\n  max-width: 500px;\n  cursor: pointer;\n  :hover {\n    color: ${colors.orange};\n  }\n`;\n\nconst Username = styled.h2`\n  margin: 0;\n`;\n\nconst Info = styled.p`\n  margin: 0.2rem 0;\n`;\n\nconst AvatarWrapper = styled.div`\n  height: 5rem;\n  display: flex;\n  align-items: center;\n`;\n\nconst MessageButton = styled.span`\n  color: ${colors.white};\n  margin-left: 0.5rem;\n  padding: 0.4rem 0.5rem 0.3rem;\n  cursor: pointer;\n  :hover {\n    color: ${colors.orange};\n  }\n`;\n\nconst EditLabel = styled.label`\n  color: ${colors.brightGrey};\n`;\n\nconst EditText = styled.input`\n  background-color: inherit;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid ${colors.white};\n  color: ${colors.white};\n  margin: 0 0 1rem 0;\n  padding: 0.5rem 0.5rem;\n`;\n\nconst EditWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { User } from './User';\n\nexport const Users = ({ currentUser, users, updateUsers, setUpdateUsers }) => (\n  <UsersWrapper>\n    <User\n      isCurrentUser={true}\n      user={currentUser}\n      updateUsers={updateUsers}\n      setUpdateUsers={setUpdateUsers}\n    />\n    {users &&\n      Array.isArray(users) &&\n      users\n        .filter(user => user.username !== currentUser.username)\n        .map(user => {\n          return (\n            <User\n              key={user.username}\n              isCurrentUser={currentUser.username === user.username}\n              user={user}\n              updateUsers={updateUsers}\n              setUpdateUsers={setUpdateUsers}\n            />\n          );\n        })}\n  </UsersWrapper>\n);\n\nconst UsersWrapper = styled.div`\n  margin: 0.5rem;\n  padding: 0;\n  width: 100%;\n`;\n","import styled from 'styled-components';\nimport { colors } from '../../constants/colors';\n\nexport const Em = styled.span`\n  color: ${colors.orange};\n`;\nexport const Button = styled.button`\n  background-color: ${p => (p.selected ? colors.brightGrey : colors.darkGrey)};\n  color: ${colors.darkWhite};\n  padding: 0.5rem;\n  border: 1px solid ${colors.darkGrey};\n`;\nexport const MinimalButton = styled.button`\n  background-color: inherit;\n  border: none;\n  color: inherit;\n`;\nexport const AddButton = styled(Button)`\n  width: 15%;\n  font-size: x-large;\n`;\nexport const Input = styled.input`\n  padding: 0.3rem;\n  border: 1px solid ${colors.darkGrey};\n  background-color: inherit;\n  color: inherit;\n`;\nexport const Tags = styled.div`\n  padding: 0.2rem 0;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: wrap;\n  div:nth-child(3) {\n    margin-top: -0.01rem;\n    border: 1px solid red;\n  }\n`;\nexport const Tag = styled.span`\n  border: 1px solid ${colors.darkGrey};\n  padding: 0.1rem 0.5rem;\n  margin-top: 0.2rem;\n  margin-right: 0.2rem;\n  margin-bottom: 0.2rem;\n  opacity: 0.9;\n\n  text-transform: lowercase;\n\n  :hover {\n    cursor: pointer;\n    border: 1px solid ${colors.brightGrey};\n    opacity: 1;\n  }\n`;\nexport const LI = styled.li`\n  list-style: none;\n  margin: ${p => (p.showDetailedView ? '1rem' : 0)} 0;\n  padding: 0;\n`;\nexport const FlexWrapper = styled.div`\n  display: flex;\n`;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\n\nconst Suggestions = ({\n  results,\n  inputTag,\n  setInputTag,\n  addTag,\n  setShowSuggestions,\n}) => {\n  const options = results.map(r => (\n    <option key={r._id} value={r.name}>\n      {r.name}\n    </option>\n  ));\n  return (\n    <>\n      {results.length > 0 && (\n        <SelectChild\n          id=\"SelectChild\"\n          tabIndex=\"0\"\n          size={results.length < 10 ? results.length : 10}\n          value={inputTag}\n          onChange={e => {\n            setInputTag(e.target.value);\n            setShowSuggestions(false);\n            addTag(e.target.value);\n          }}\n        >\n          {options}\n        </SelectChild>\n      )}\n    </>\n  );\n};\n\nconst Select = styled.select`\n  padding: 0.3rem;\n  border: 1px solid ${colors.darkGrey};\n  background-color: inherit;\n  color: inherit;\n`;\nconst SelectChild = styled(Select)`\n  width: 85%;\n  border-radius: 0;\n`;\n\nexport default Suggestions;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { FlexWrapper, Input, AddButton } from './commonComponents';\nimport Suggestions from './Suggestions';\n\nconst InputTag = ({ id, inputTags, setInputTags, memories }) => {\n  const [inputTag, setInputTag] = useState('');\n  const [showSuggestions, setShowSuggestions] = useState(true);\n\n  const addTag = t => {\n    if (t) {\n      !inputTags\n        .slice(0, inputTags.length - 1)\n        .find(tag => tag === t.toLowerCase()) &&\n        setInputTags([...inputTags, t.trim().toLowerCase()]);\n    } else {\n      inputTag &&\n        !inputTags\n          .slice(0, inputTags.length - 1)\n          .find(tag => tag === inputTag.toLowerCase()) &&\n        setInputTags([...inputTags, inputTag.trim().toLowerCase()]);\n    }\n    setInputTag('');\n  };\n\n  useEffect(() => {\n    if (inputTag.endsWith(' ')) {\n      addTag();\n    }\n  }, [inputTag]);\n\n  return (\n    <>\n      <FlexWrapper>\n        <TagInput\n          id={id}\n          value={inputTag}\n          onChange={e => {\n            setShowSuggestions(true);\n            setInputTag(e.target.value);\n          }}\n          autocomplete=\"off\"\n        />\n        <AddButton\n          onClick={() => {\n            addTag();\n            document.getElementById(id).focus();\n          }}\n        >\n          +\n        </AddButton>\n      </FlexWrapper>\n      <FlexWrapper>\n        {inputTag.length > 0 && showSuggestions && (\n          <Suggestions\n            addTag={addTag}\n            inputTag={inputTag}\n            setInputTag={setInputTag}\n            showSuggestions={showSuggestions}\n            setShowSuggestions={setShowSuggestions}\n            results={memories.filter(m =>\n              m.name.toLowerCase().includes(inputTag.toLowerCase())\n            )}\n          />\n        )}\n      </FlexWrapper>\n    </>\n  );\n};\n\nconst TagInput = styled(Input)`\n  width: 85%;\n  margin-bottom: 0;\n`;\n\nexport default InputTag;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\nimport { apiUrl } from '../../constants/urls';\nimport { create, update, remove } from '../../utils/api';\nimport { uuidv4 } from '../../utils/helpers';\nimport {\n  Input,\n  Button,\n  Tags,\n  Tag,\n  FlexWrapper,\n  AddButton,\n} from './commonComponents';\nimport InputTag from './InputTag';\n\nconst getLinkConfiguration = (type, link) => ({\n  _id: uuidv4(),\n  type: 'Link',\n  name: type,\n  linkedId: link._id,\n  linkedName: link.name,\n});\n\nconst MemoryInput = ({\n  toggleRefresh,\n  setToggleRefresh,\n  updateMemory,\n  setUpdateMemory,\n  memoryLinks,\n  memories,\n  currentUser,\n  setShowMemoryInput,\n}) => {\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\n  const [inputName, setInputName] = useState(\n    updateMemory ? updateMemory.name : ''\n  );\n  const [inputDescription, setInputDescription] = useState(\n    updateMemory ? updateMemory.description : ''\n  );\n  const [inputTags, setInputTags] = useState(\n    updateMemory ? updateMemory.tags : []\n  );\n  const [inputChild, setInputChild] = useState(\n    memoryLinks && memoryLinks[0] && memoryLinks[0].name\n  );\n  const [inputChildren, setInputChildren] = useState(\n    memories && updateMemory\n      ? updateMemory.children.map(c =>\n          memories.find(m => m._id === c.linkedId).name.toLowerCase()\n        )\n      : []\n  );\n  const [inputParent, setInputParent] = useState('');\n  const [inputParents, setInputParents] = useState(\n    memories && updateMemory\n      ? updateMemory.parents.map(p =>\n          memories.find(m => m._id === p.linkedId).name.toLowerCase()\n        )\n      : []\n  );\n\n  useEffect(() => {\n    document.getElementById('InputName').focus();\n  }, []);\n\n  useEffect(() => {\n    console.log('InputParents: ', inputParents);\n  }, [inputParents]);\n\n  useEffect(() => {\n    console.log('InputChildren: ', inputChildren);\n  }, [inputChildren]);\n\n  return (\n    <>\n      <InputArea>\n        <Label>Name</Label>\n        <Input\n          id=\"InputName\"\n          value={inputName}\n          onChange={e => setInputName(e.target.value)}\n        />\n      </InputArea>\n      <InputArea>\n        <Label>Description</Label>\n        <TextArea\n          id=\"InputDescription\"\n          value={inputDescription}\n          onChange={e => setInputDescription(e.target.value)}\n        />\n      </InputArea>\n      <InputArea>\n        <Label>Tags</Label>\n        <InputTag\n          id=\"TagInput\"\n          inputTags={inputTags}\n          setInputTags={setInputTags}\n          memories={memories}\n        />\n        <Tags>\n          {inputTags &&\n            inputTags.map(tag => (\n              <Tag\n                key={tag}\n                onClick={e => {\n                  setInputTags(\n                    inputTags.filter(\n                      tag =>\n                        tag !==\n                        e.target.innerText.substring(\n                          0,\n                          e.target.innerText.length - 2\n                        )\n                    )\n                  );\n                  document.getElementById('TagInput').focus();\n                }}\n              >\n                {tag} &times;\n              </Tag>\n            ))}\n        </Tags>\n      </InputArea>\n      <InputArea>\n        <Label>Children</Label>\n        <FlexWrapper>\n          <SelectChild\n            id=\"SelectChild\"\n            value={inputChild}\n            onChange={e => {\n              setInputChild(e.target.value);\n            }}\n          >\n            {memoryLinks\n              .filter(\n                ml => !inputChildren.some(c => c === ml.name.toLowerCase())\n              )\n              .map(ml => (\n                <option key={ml.name} value={ml.name}>\n                  {ml.name}\n                </option>\n              ))}\n          </SelectChild>\n          <AddButton\n            onClick={() => {\n              inputChild &&\n                !inputChildren.find(\n                  child => child === inputChild.toLowerCase()\n                ) &&\n                setInputChildren([...inputChildren, inputChild.toLowerCase()]);\n\n              setInputChild(\n                memoryLinks.find(\n                  l =>\n                    !inputChildren.find(child => child === l.name.toLowerCase())\n                )\n                  ? memoryLinks.find(\n                      l =>\n                        !inputChildren.find(\n                          child => child === l.name.toLowerCase()\n                        )\n                    ).name\n                  : memoryLinks[0].name\n              );\n              setInputParents(\n                inputParents.filter(\n                  parent => parent !== inputChild.toLowerCase()\n                )\n              );\n              document.getElementById('SelectChild').focus();\n            }}\n          >\n            +\n          </AddButton>\n        </FlexWrapper>\n        <Tags>\n          {inputChildren &&\n            inputChildren.map(child => (\n              <Tag\n                key={child}\n                onClick={e => {\n                  setInputChildren(\n                    inputChildren.filter(\n                      child =>\n                        child !==\n                        e.target.innerText.substring(\n                          0,\n                          e.target.innerText.length - 2\n                        )\n                    )\n                  );\n                  setInputChild(\n                    inputChildren.find(child => child !== inputChild)\n                  );\n                  document.getElementById('SelectChild').focus();\n                }}\n              >\n                {child} &times;\n              </Tag>\n            ))}\n        </Tags>\n      </InputArea>\n      <InputArea>\n        <Label>Parents</Label>\n        <FlexWrapper>\n          <SelectParent\n            id=\"SelectParent\"\n            value={inputParent}\n            onChange={e => {\n              setInputParent(e.target.value);\n            }}\n          >\n            {memoryLinks\n              .filter(\n                ml => !inputParents.some(p => p === ml.name.toLowerCase())\n              )\n              .map(ml => (\n                <option key={ml.name} value={ml.name}>\n                  {ml.name}\n                </option>\n              ))}\n          </SelectParent>\n          <AddButton\n            onClick={() => {\n              inputParent &&\n                !inputParents.find(\n                  parent => parent === inputParent.toLowerCase()\n                ) &&\n                setInputParents([...inputParents, inputParent.toLowerCase()]);\n\n              setInputParent(\n                memoryLinks.find(\n                  l =>\n                    !inputParents.find(\n                      parent => parent === l.name.toLowerCase()\n                    )\n                )\n                  ? memoryLinks.find(\n                      l =>\n                        !inputParents.find(\n                          parent => parent === l.name.toLowerCase()\n                        )\n                    ).name\n                  : memoryLinks[0].name\n              );\n              setInputChildren(\n                inputChildren.filter(\n                  child => child !== inputParent.toLowerCase()\n                )\n              );\n\n              document.getElementById('SelectParent').focus();\n            }}\n          >\n            +\n          </AddButton>\n        </FlexWrapper>\n        <Tags>\n          {inputParents &&\n            inputParents.map(parent => (\n              <Tag\n                key={parent}\n                onClick={e => {\n                  setInputParents(\n                    inputParents.filter(\n                      parent =>\n                        parent !==\n                        e.target.innerText.substring(\n                          0,\n                          e.target.innerText.length - 2\n                        )\n                    )\n                  );\n                  setInputParent(\n                    inputParents.find(parent => parent !== inputParent)\n                  );\n                  document.getElementById('SelectParent').focus();\n                }}\n              >\n                {parent} &times;\n              </Tag>\n            ))}\n        </Tags>\n      </InputArea>\n      {!updateMemory && (\n        <FormButton\n          onClick={() => {\n            create(\n              `${apiUrl}/memories`,\n              {\n                type: 'Memory',\n                name: inputName,\n                description: inputDescription,\n                tags: inputTags,\n                children: inputChildren.map(c => {\n                  const link = memories.find(\n                    m => c.toLowerCase() === m.name.toLowerCase()\n                  );\n                  return link && getLinkConfiguration('child', updateMemory);\n                }),\n                parents: inputParents.map(p => {\n                  const link = memories.find(\n                    m => p.toLowerCase() === m.name.toLowerCase()\n                  );\n                  return link && getLinkConfiguration('parent', updateMemory);\n                }),\n              },\n              currentUser.username\n            ).then(response => {\n              console.log('Successfully created: ', response);\n              setShowMemoryInput(false);\n              setToggleRefresh(!toggleRefresh);\n            });\n          }}\n        >\n          Save memory\n        </FormButton>\n      )}\n      {updateMemory && (\n        <>\n          <FormButton\n            onClick={() => {\n              update(\n                `${apiUrl}/memories/${updateMemory._id}`,\n                {\n                  type: 'Memory',\n                  name: inputName,\n                  description: inputDescription,\n                  tags: inputTags,\n                  children: inputChildren.map(c => {\n                    const link = memories.find(\n                      m => c.toLowerCase() === m.name.toLowerCase()\n                    );\n                    return link && getLinkConfiguration('child', link);\n                  }),\n                  parents: inputParents.map(p => {\n                    const link = memories.find(\n                      m => p.toLowerCase() === m.name.toLowerCase()\n                    );\n                    return link && getLinkConfiguration('parent', link);\n                  }),\n                },\n                currentUser.username\n              ).then(memory => {\n                if (\n                  memory.children !== updateMemory.children &&\n                  memory.children.length < updateMemory.children.length\n                ) {\n                  // Remove parent of child if removing child\n                  const removedChildren = updateMemory.children.filter(\n                    child =>\n                      !memory.children\n                        .map(c => c.linkedId)\n                        .includes(child.linkedId)\n                  );\n                  removedChildren &&\n                    removedChildren.map(removedChild => {\n                      memories.forEach(m => {\n                        if (\n                          m._id === removedChild.linkedId &&\n                          m.parents.some(p => p.linkedId === memory._id)\n                        ) {\n                          update(\n                            `${apiUrl}/memories/${m._id}`,\n                            {\n                              ...m,\n                              parents: m.parents.filter(\n                                p => p.linkedId !== memory._id\n                              ),\n                            },\n                            currentUser.username\n                          ).then(response => {\n                            setUpdateMemory(undefined);\n                            setToggleRefresh(!toggleRefresh);\n                          });\n                        }\n                      });\n                    });\n                } else if (\n                  memory.children !== updateMemory.children &&\n                  memory.children.length > updateMemory.children.length\n                ) {\n                  // Add parent of child if adding child\n                  memory.children.forEach(child => {\n                    memories.forEach(m => {\n                      if (\n                        m._id === child.linkedId &&\n                        !m.parents.some(\n                          parent => parent.linkedId === memory._id\n                        )\n                      ) {\n                        update(\n                          `${apiUrl}/memories/${m._id}`,\n                          {\n                            ...m,\n                            parents: [\n                              ...m.parents,\n                              getLinkConfiguration('parent', updateMemory),\n                            ],\n                          },\n                          currentUser.username\n                        ).then(response => {\n                          setUpdateMemory(undefined);\n                          setToggleRefresh(!toggleRefresh);\n                        });\n                      }\n                    });\n                  });\n                }\n\n                if (\n                  memory.parents !== updateMemory.parents &&\n                  memory.parents.length < updateMemory.parents.length\n                ) {\n                  // Remove child of parent if removing parent\n                  const removedParents = updateMemory.parents.filter(\n                    parent =>\n                      !memory.parents\n                        .map(c => c.linkedId)\n                        .includes(parent.linkedId)\n                  );\n                  removedParents &&\n                    removedParents.map(removedParent => {\n                      memories.forEach(m => {\n                        if (\n                          m._id === removedParent.linkedId &&\n                          m.children.some(p => p.linkedId === memory._id)\n                        ) {\n                          update(\n                            `${apiUrl}/memories/${m._id}`,\n                            {\n                              ...m,\n                              children: m.children.filter(\n                                c => c.linkedId !== memory._id\n                              ),\n                            },\n                            currentUser.username\n                          ).then(response => {\n                            setUpdateMemory(undefined);\n                            setToggleRefresh(!toggleRefresh);\n                          });\n                        }\n                      });\n                    });\n                } else if (\n                  memory.parents !== updateMemory.parents &&\n                  memory.parents.length > updateMemory.parents.length\n                ) {\n                  // Add child of parent if adding parent\n                  memory.parents.forEach(child => {\n                    memories.forEach(m => {\n                      if (\n                        m._id === child.linkedId &&\n                        !m.children.some(child => child.linkedId === memory._id)\n                      ) {\n                        update(\n                          `${apiUrl}/memories/${m._id}`,\n                          {\n                            ...m,\n                            children: [\n                              ...m.children,\n                              getLinkConfiguration('child', updateMemory),\n                            ],\n                          },\n                          currentUser.username\n                        ).then(response => {\n                          setUpdateMemory(undefined);\n                          setToggleRefresh(!toggleRefresh);\n                        });\n                      }\n                    });\n                  });\n                }\n                setUpdateMemory(undefined);\n                setToggleRefresh(!toggleRefresh);\n              });\n            }}\n          >\n            Update memory\n          </FormButton>\n          {!showConfirmDelete && (\n            <DeleteButton\n              onClick={() => {\n                setShowConfirmDelete(!showConfirmDelete);\n              }}\n            >\n              Delete memory\n            </DeleteButton>\n          )}\n          {showConfirmDelete && (\n            <>\n              <DeleteButton\n                confirmDelete\n                onClick={() => {\n                  setShowConfirmDelete(!showConfirmDelete);\n                  remove(\n                    `${apiUrl}/memories/${updateMemory._id}`,\n                    currentUser.username\n                  ).then(response => {\n                    console.log('Successfully removed: ', response);\n                    setUpdateMemory(undefined);\n                    setToggleRefresh(!toggleRefresh);\n                  });\n                }}\n              >\n                Confirm DELETE of {updateMemory.name}\n              </DeleteButton>\n              <FormButton onClick={() => setShowConfirmDelete(false)}>\n                Cancel\n              </FormButton>\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nconst TextArea = styled.textarea`\n  border: 1px solid ${colors.darkGrey};\n  padding: 0.5rem;\n  background-color: inherit;\n  color: inherit;\n  resize: none;\n  min-height: 8rem;\n`;\nconst Label = styled.label`\n  color: ${colors.orange};\n  margin-bottom: 0.3rem;\n`;\nconst InputArea = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0.5rem;\n`;\nconst FormButton = styled(Button)`\n  width: 100%;\n  margin-top: 1rem;\n`;\nconst DeleteButton = styled(FormButton)`\n  background: maroon;\n  border: ${p => (p.confirmDelete ? '1px solid white' : 'none')};\n  color: ${colors.white};\n`;\nconst Select = styled.select`\n  padding: 0.3rem;\n  border: 1px solid ${colors.darkGrey};\n  background-color: inherit;\n  color: inherit;\n`;\nconst SelectChild = styled(Select)`\n  width: 85%;\n  border-radius: 0;\n`;\nconst SelectParent = styled(Select)`\n  width: 85%;\n  border-radius: 0;\n`;\n\nexport default MemoryInput;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\n\nconst Sticky = ({ toggleRefresh, setToggleRefresh }) => (\n  <StickyWrapper\n    onClick={() => {\n      document.getElementById('SearchField').focus();\n      setToggleRefresh(!toggleRefresh);\n    }}\n  >\n    <span>&#x2303;</span>\n    <span>&#x2303;</span>\n  </StickyWrapper>\n);\n\nconst StickyWrapper = styled.div`\n  border: 1px solid ${colors.darkGrey};\n  color: ${colors.brightGrey};\n  background-color: ${colors.darkerGrey};\n  width: 100vw;\n  position: fixed;\n  display: flex;\n  justify-content: space-between;\n  font-size: larger;\n  padding: 0.5rem 1rem 0rem;\n  bottom: 0;\n`;\n\nexport default Sticky;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { LI, Tags, Tag, Em, MinimalButton } from './commonComponents';\n\nconst Memory = ({\n  memories,\n  memory,\n  searchQueries,\n  setSearchQueries,\n  setFocus,\n  setUpdateMemory,\n  showDetailedViewFor: detailedViewFor,\n}) => {\n  const [showEditButtons, setShowEditButtons] = useState(false);\n  const [showDetailedView, setShowDetailedView] = useState(detailedViewFor);\n  const {\n    _id,\n    name,\n    description,\n    tags,\n    parents: parentLinks,\n    children: childrenLinks,\n  } = memory;\n\n  useEffect(() => {\n    setShowDetailedView(detailedViewFor);\n  }, [detailedViewFor]);\n\n  const children = childrenLinks.map(\n    c => memories.find(s => s._id === c.linkedId) || []\n  );\n  const parents = parentLinks.map(\n    p => memories.find(s => s._id === p.linkedId) || []\n  );\n\n  const includesSearchQueries = elements => {\n    return searchQueries.every(searchQuery =>\n      elements.some(element =>\n        element.toLowerCase().includes(searchQuery.toLowerCase())\n      )\n    );\n  };\n  return (\n    includesSearchQueries([name, description, ...tags]) && (\n      <LI showDetailedView={showDetailedView}>\n        <Parents>\n          <Name\n            onClick={() => {\n              setShowEditButtons(!showEditButtons);\n              setShowDetailedView(\n                showEditButtons\n                  ? detailedViewFor\n                  : {\n                      tags: true,\n                      parents: true,\n                      children: true,\n                      description: true,\n                    }\n              );\n            }}\n          >\n            {name}\n            {showEditButtons && (\n              <Edit\n                onClick={() =>\n                  setUpdateMemory({\n                    _id,\n                    name,\n                    description,\n                    tags,\n                    parents: parentLinks,\n                    children: childrenLinks,\n                    count: 0,\n                  })\n                }\n              >\n                &#x270E;\n              </Edit>\n            )}\n          </Name>\n          {parents &&\n            parents.length !== 0 &&\n            showDetailedView.parents &&\n            parents.map(\n              c =>\n                c.name && (\n                  <Parent\n                    key={c.name}\n                    onClick={() => {\n                      setFocus();\n                      setSearchQueries([...searchQueries, c.name]);\n                    }}\n                  >\n                    {c.name}\n                  </Parent>\n                )\n            )}\n        </Parents>\n        <>\n          {showDetailedView.tags && (\n            <Tags>\n              {tags.map(t => (\n                <Tag\n                  key={t}\n                  onClick={() => {\n                    setFocus();\n                    setSearchQueries([...searchQueries, t]);\n                  }}\n                >\n                  {t}\n                </Tag>\n              ))}\n            </Tags>\n          )}\n          {showDetailedView.description && description}\n          {children && children.length !== 0 && showDetailedView.children && (\n            <Children>\n              {children.map(c => (\n                <Child\n                  key={c.name}\n                  onClick={() => {\n                    setFocus();\n                    setSearchQueries([...searchQueries, c.name]);\n                  }}\n                >\n                  {c.name}\n                </Child>\n              ))}\n            </Children>\n          )}\n        </>\n      </LI>\n    )\n  );\n};\n\nconst Children = styled(Tags)``;\nconst Child = styled(Tag)`\n  opacity: 0.5;\n`;\nconst Parents = styled(Tags)``;\nconst Parent = styled(Tag)`\n  opacity: 0.5;\n`;\nconst Name = styled(Em)`\n  margin-right: 0.5rem;\n`;\nconst Edit = styled(MinimalButton)`\n  margin-left: 0.5rem;\n`;\n\nexport default Memory;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Memory from './Memory';\nimport { Tags, Tag } from './commonComponents';\nimport InputTag from './InputTag';\n\nconst Search = ({\n  searchQueries,\n  setSearchQueries,\n  setFocus,\n  memories,\n  setUpdateMemory,\n  showDetailedViewFor,\n}) => (\n  <>\n    <SearchWrapper>\n      <InputTag\n        id=\"SearchField\"\n        inputTags={searchQueries}\n        setInputTags={setSearchQueries}\n        memories={memories}\n      />\n      <Tags>\n        {searchQueries &&\n          searchQueries\n            .filter(searchQuery => searchQuery)\n            .map(searchQuery => (\n              <Tag\n                key={searchQuery}\n                onClick={() =>\n                  setSearchQueries(\n                    searchQueries.filter(sq => sq !== searchQuery)\n                  )\n                }\n              >\n                {searchQuery} &times;\n              </Tag>\n            ))}\n      </Tags>\n    </SearchWrapper>\n    <SearchResults>\n      {memories &&\n        memories.map(m => (\n          <Memory\n            key={m.name}\n            memories={memories}\n            memory={m}\n            searchQueries={searchQueries.filter(searchQuery => searchQuery)}\n            setSearchQueries={setSearchQueries}\n            setFocus={setFocus}\n            setUpdateMemory={setUpdateMemory}\n            showDetailedViewFor={showDetailedViewFor}\n          />\n        ))}\n    </SearchResults>\n  </>\n);\n\nconst SearchWrapper = styled.div`\n  margin: 0 0 0.5rem;\n`;\nconst SearchResults = styled.ul`\n  margin: 0;\n`;\n\nexport default Search;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\nimport { Button } from './commonComponents';\n\nconst Settings = ({\n  showDetailedViewFor,\n  setShowDetailedViewFor,\n  sortType,\n  setSortType,\n  sortAscending,\n  setSortAscending,\n}) => {\n  const sortTypes = ['name', 'tags', 'description'];\n\n  return (\n    <>\n      <SearchSettings>\n        <Symbol>&#x22CE;</Symbol>{' '}\n        {Object.keys(showDetailedViewFor).map(view => (\n          <Setting\n            key={view}\n            selectedSetting={showDetailedViewFor[view]}\n            onClick={() => {\n              setShowDetailedViewFor({\n                ...showDetailedViewFor,\n                [view]: !showDetailedViewFor[view],\n              });\n            }}\n          >\n            {view}\n          </Setting>\n        ))}\n      </SearchSettings>\n      <SearchSettings>\n        <Symbol>&#x2195;</Symbol>{' '}\n        {sortTypes &&\n          sortTypes.map(st => (\n            <Setting\n              key={st}\n              selectedSetting={st === sortType}\n              onClick={() => setSortType(st)}\n            >\n              {st}\n            </Setting>\n          ))}\n        <Setting\n          selectedSetting\n          onClick={() => setSortAscending(!sortAscending)}\n        >\n          {sortAscending ? <>&darr;</> : <>&uarr;</>}\n        </Setting>\n      </SearchSettings>\n    </>\n  );\n};\n\nconst SearchSettings = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 95%;\n  margin-bottom: 0.5rem;\n`;\nconst Setting = styled(Button)`\n  background-color: ${p => (p.selectedSetting ? 'none' : 'inherit')};\n  border: ${p => (p.selectedSetting ? 'none' : 'inherit')};\n  margin-right: 0.2rem;\n  min-width: 2.5rem;\n`;\nconst Symbol = styled.span`\n  margin-right: 0.5rem;\n  color: ${colors.orange};\n  font-size: x-large;\n`;\n\nexport default Settings;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { colors } from '../../constants/colors';\nimport { apiUrl } from '../../constants/urls';\nimport { get } from '../../utils/api';\nimport MemoryInput from './MemoryInput';\nimport Sticky from './Sticky';\nimport Search from './Search';\nimport Settings from './Settings';\n\nexport const ReMemory = ({ currentUser }) => {\n  const [toggleRefresh, setToggleRefresh] = useState(false);\n  const [showMemoryInput, setShowMemoryInput] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n  const [showDetailedViewFor, setShowDetailedViewFor] = useState({\n    tags: true,\n    parents: true,\n    children: true,\n    description: true,\n  });\n\n  const [searchQueries, setSearchQueries] = useState(['']);\n  const [memories, setMemories] = useState([]);\n  const [memoryLinks, setMemoryLinks] = useState([]);\n  const [updateMemory, setUpdateMemory] = useState(undefined);\n  const [sortType, setSortType] = useState('name');\n  const [sortAscending, setSortAscending] = useState(true);\n\n  useEffect(() => {\n    if (!currentUser) return;\n    get(`${apiUrl}/memories`, currentUser.username).then(memories => {\n      setMemories(memories);\n      setMemoryLinks(\n        memories.map(memory => ({ name: memory.name, _id: memory._id }))\n      );\n    });\n  }, [toggleRefresh]);\n\n  useEffect(() => {\n    if (updateMemory) {\n      setShowMemoryInput(true);\n    } else {\n      setShowMemoryInput(false);\n      setToggleRefresh(!toggleRefresh);\n    }\n  }, [updateMemory]);\n\n  const sortedMemories = memories.sort((a, b) => {\n    let sortA = a[sortType];\n    let sortB = b[sortType];\n\n    if (\n      (Array.isArray(a[sortType]) && a[sortType].length === 0) ||\n      (Array.isArray(b[sortType]) && b[sortType].length === 0)\n    ) {\n      return 0;\n    }\n\n    if (Array.isArray(a[sortType])) {\n      sortA = a[sortType][0];\n    } else {\n      sortA = a[sortType];\n    }\n    if (Array.isArray(b[sortType])) {\n      sortB = b[sortType][0];\n    } else {\n      sortB = b[sortType];\n    }\n    if (sortA.toLowerCase() < sortB.toLowerCase()) {\n      return sortAscending ? -1 : 1;\n    }\n    if (sortA.toLowerCase() > sortB.toLowerCase()) {\n      return sortAscending ? 1 : -1;\n    }\n    return 0;\n  });\n\n  const setFocus = elementId => {\n    document.getElementById(elementId).focus();\n    document.getElementById(elementId).blur();\n  };\n\n  return (\n    <>\n      <Container>\n        <Header\n          onClick={() => {\n            setUpdateMemory(undefined);\n            setShowMemoryInput(!showMemoryInput);\n          }}\n        >\n          ReMemory{' '}\n          {showMemoryInput ? (\n            <SearchIcon>&#9906;</SearchIcon>\n          ) : (\n            <>\n              <AddIcon>+</AddIcon>\n              <SettingsIcon\n                onClick={e => {\n                  e.stopPropagation();\n                  setShowSettings(!showSettings);\n                }}\n              >\n                &#x2699;\n              </SettingsIcon>\n            </>\n          )}\n        </Header>\n        <Body>\n          {showMemoryInput && (\n            <MemoryInput\n              toggleRefresh={toggleRefresh}\n              setToggleRefresh={setToggleRefresh}\n              updateMemory={updateMemory}\n              setUpdateMemory={setUpdateMemory}\n              memoryLinks={memoryLinks}\n              memories={memories}\n              currentUser={currentUser}\n              setShowMemoryInput={setShowMemoryInput}\n              toggleRefresh={toggleRefresh}\n              setToggleRefresh={setToggleRefresh}\n            />\n          )}\n          {!showMemoryInput && (\n            <>\n              {showSettings && (\n                <Settings\n                  showDetailedViewFor={showDetailedViewFor}\n                  setShowDetailedViewFor={setShowDetailedViewFor}\n                  sortType={sortType}\n                  setSortType={setSortType}\n                  sortAscending={sortAscending}\n                  setSortAscending={setSortAscending}\n                />\n              )}\n              <Search\n                searchQueries={searchQueries}\n                setSearchQueries={setSearchQueries}\n                setFocus={() => setFocus('SearchField')}\n                memories={sortedMemories}\n                setUpdateMemory={setUpdateMemory}\n                showDetailedViewFor={showDetailedViewFor}\n              />\n            </>\n          )}\n        </Body>\n      </Container>\n      {!showMemoryInput && (\n        <Sticky\n          toggleRefresh={toggleRefresh}\n          setToggleRefresh={setToggleRefresh}\n        />\n      )}\n    </>\n  );\n};\n\nconst Container = styled.div`\n  max-width: 90vw;\n  margin-top: 0.3rem;\n  margin-bottom: 3rem;\n  width: 100vw;\n`;\n\nconst Header = styled.h2`\n  color: ${colors.brightGrey || 'white'};\n  display: flex;\n  margin-bottom: 0.8rem;\n\n  :hover {\n    cursor: pointer;\n  }\n`;\n\nconst Body = styled.div`\n  color: ${colors.brightGrey || 'white'};\n`;\n\nconst SearchIcon = styled.div`\n  margin-left: 0.6rem;\n  -webkit-transform: translate(0%) rotate(45deg);\n  -moz-transform: translate(0%) rotate(45deg);\n  -o-transform: translate(0%) rotate(45deg);\n  transform: translate(0%) rotate(45deg);\n  color: ${colors.darkWhite};\n`;\nconst Icon = styled.span`\n  margin-left: 0.6rem;\n  color: ${colors.darkWhite};\n`;\nconst AddIcon = styled(Icon)``;\nconst SettingsIcon = styled(Icon)`\n  display: flex;\n  align-items: center;\n  padding-top: 0.07rem;\n  font-size: small;\n`;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { StaticQuery, graphql } from 'gatsby';\nimport Header from './header';\n\nimport { colors } from '../constants/colors';\nimport { Chat } from './chat/Chat';\nimport { LoginForm } from './login/LoginForm';\nimport { Welcome } from './welcome/Welcome';\nimport { Habits } from './habits/Habits.js';\nimport { SignupForm } from './signup/SignupForm';\nimport { Users } from './users/Users';\nimport { get } from '../utils/api';\nimport { apiUrl } from '../constants/urls';\nimport { ReMemory } from './reMemory/ReMemory';\n\nconst tabs = ['Users', 'Chat', 'Habits', 'ReMemory'];\n\nexport const Main = () => {\n  const [tab, setTab] = useState('Welcome');\n  const [users, setUsers] = useState([]);\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [signup, setSignup] = useState(false);\n  const [showSite, setShowSite] = useState(false);\n  const [signUpSuccessful, setSignUpSuccessful] = useState(false);\n  const [loginSuccessful, setLoginSuccessful] = useState(false);\n  const [updateUsers, setUpdateUsers] = useState(false);\n\n  useEffect(() => {\n    setShowSite(false);\n    setTimeout(() => {\n      setShowSite(true);\n    }, 400);\n    get(`${apiUrl}/users`, 'Unauthorized').then(users => {\n      if (users.error) return;\n      setUsers(users);\n      setCurrentUser(\n        users.find(\n          user =>\n            user.username === process.env.MOCK_USER ||\n            (sessionStorage.getItem('username') &&\n              user.password === process.env.MOCK_PASSWORD) ||\n            sessionStorage.getItem('password')\n        )\n      );\n    });\n    setTab(sessionStorage.getItem('tab') || 'Welcome');\n  }, [signUpSuccessful, loginSuccessful, updateUsers]);\n\n  return (\n    <StaticQuery\n      query={graphql`\n        query SiteTitleQuery {\n          site {\n            siteMetadata {\n              title\n            }\n          }\n        }\n      `}\n      render={data =>\n        showSite && (\n          <>\n            <Header\n              siteTitle={data.site.siteMetadata.title}\n              setCurrentUser={setCurrentUser}\n              setLoginSuccessful={setLoginSuccessful}\n            />\n            {!currentUser && !signup && (\n              <MainWrapper>\n                <LoginForm\n                  setSignup={setSignup}\n                  signUpSuccessful={signUpSuccessful}\n                  setLoginSuccessful={setLoginSuccessful}\n                  setCurrentUser={setCurrentUser}\n                />\n              </MainWrapper>\n            )}\n            {!currentUser && signup && (\n              <MainWrapper>\n                <SignupForm\n                  setSignUpSuccessful={setSignUpSuccessful}\n                  setCurrentUser={setCurrentUser}\n                  currentUser={currentUser}\n                  setSignup={setSignup}\n                />\n              </MainWrapper>\n            )}\n            {currentUser && (\n              <>\n                <TabWrapper>\n                  {tabs &&\n                    tabs.map(x => (\n                      <Tab\n                        key={x}\n                        selected={tab === x}\n                        onClick={() => saveTab(x, setTab)}\n                      >\n                        {x}\n                      </Tab>\n                    ))}\n                </TabWrapper>\n                <MainWrapper>\n                  {tab === 'Welcome' && <Welcome currentUser={currentUser} />}\n                  {tab === 'Users' && (\n                    <Users\n                      currentUser={currentUser}\n                      users={users}\n                      updateUsers={updateUsers}\n                      setUpdateUsers={setUpdateUsers}\n                    />\n                  )}\n                  {tab === 'Chat' && (\n                    <Chat users={users} currentUser={currentUser} />\n                  )}\n                  {tab === 'Habits' && (\n                    <Habits users={users} currentUser={currentUser} />\n                  )}\n                  {tab === 'ReMemory' && (\n                    <ReMemory users={users} currentUser={currentUser} />\n                  )}\n                  {/* {tab === 'Lab' && <Lab />} */}\n                </MainWrapper>\n              </>\n            )}\n          </>\n        )\n      }\n    />\n  );\n};\n\nconst saveTab = (tab, setTab) => {\n  setTab(tab);\n  sessionStorage.setItem('tab', tab);\n};\n\nconst MainWrapper = styled.div`\n  color: ${colors.white};\n  display: flex;\n  justify-content: center;\n  margin: 0;\n  padding: 0;\n`;\n\nconst TabWrapper = styled.div`\n  display: flex;\n  justify-content: stretch;\n`;\n\nconst Tab = styled.button`\n  background-color: ${p => (p.selected ? colors.brightGrey : colors.darkGrey)};\n  color: ${colors.white};\n  width: 100%;\n  padding: 0.5rem 0.5rem;\n  margin: 0rem 0.05rem 0.6rem;\n  outline: none;\n  border: none;\n\n  :hover {\n    background-color: ${colors.brightGrey};\n    cursor: pointer;\n  }\n`;\n","import React from 'react';\nimport Layout from '../components/layout';\nimport SEO from '../components/seo';\nimport { Main } from '../components/main';\n\nconst IndexPage = () => (\n  <Layout>\n    <SEO title=\"Home\" keywords={[`gatsby`, `application`, `react`]} />\n    <Main />\n  </Layout>\n);\n\nexport default IndexPage;\n","/**\n * Layout component that queries for data\n * with Gatsby's StaticQuery component\n *\n * See: https://www.gatsbyjs.org/docs/static-query/\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './layout.css';\n\nconst Layout = ({ children }) => (\n  <>\n    <div\n      style={{\n        margin: `0 auto`,\n        padding: `0 0.2rem 1.45rem`,\n        paddingTop: 0,\n      }}\n    >\n      <main>{children}</main>\n      <footer />\n    </div>\n  </>\n);\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Layout;\n","/**\n * SEO component that queries for data with\n *  Gatsby's useStaticQuery React hook\n *\n * See: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport Helmet from 'react-helmet'\nimport { useStaticQuery, graphql } from 'gatsby'\n\nfunction SEO({ description, lang, meta, keywords, title }) {\n  const { site } = useStaticQuery(\n    graphql`\n      query {\n        site {\n          siteMetadata {\n            title\n            description\n            author\n          }\n        }\n      }\n    `\n  )\n\n  const metaDescription = description || site.siteMetadata.description\n\n  return (\n    <Helmet\n      htmlAttributes={{\n        lang,\n      }}\n      title={title}\n      titleTemplate={`%s | ${site.siteMetadata.title}`}\n      meta={[\n        {\n          name: `description`,\n          content: metaDescription,\n        },\n        {\n          property: `og:title`,\n          content: title,\n        },\n        {\n          property: `og:description`,\n          content: metaDescription,\n        },\n        {\n          property: `og:type`,\n          content: `website`,\n        },\n        {\n          name: `twitter:card`,\n          content: `summary`,\n        },\n        {\n          name: `twitter:creator`,\n          content: site.siteMetadata.author,\n        },\n        {\n          name: `twitter:title`,\n          content: title,\n        },\n        {\n          name: `twitter:description`,\n          content: metaDescription,\n        },\n      ]\n        .concat(\n          keywords.length > 0\n            ? {\n                name: `keywords`,\n                content: keywords.join(`, `),\n              }\n            : []\n        )\n        .concat(meta)}\n    />\n  )\n}\n\nSEO.defaultProps = {\n  lang: `en`,\n  meta: [],\n  keywords: [],\n}\n\nSEO.propTypes = {\n  description: PropTypes.string,\n  lang: PropTypes.string,\n  meta: PropTypes.array,\n  keywords: PropTypes.arrayOf(PropTypes.string),\n  title: PropTypes.string.isRequired,\n}\n\nexport default SEO\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n"],"sourceRoot":""}
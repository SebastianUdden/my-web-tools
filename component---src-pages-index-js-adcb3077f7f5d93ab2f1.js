(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{145:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(149),u=t(150),i=t(146),c=t.n(i),l=(t(74),t(175)),s=t(147),m=t(153),d=t(4),f=t.n(d),g="#111",p="#fff",b="#222",v="#333",h="#3a3a3a",E="#444",y="#666",w="#ddd",S="#ff8c00";function k(){var e=c()(["\n  color: white;\n"]);return k=function(){return e},e}function x(){var e=c()(["\n  margin: 0;\n  font-size: medium;\n  display: flex;\n  justify-content: space-between;\n"]);return x=function(){return e},e}function O(){var e=c()(["\n  margin: 0 auto;\n  max-width: 960;\n  padding: 0.3rem 0.5rem;\n"]);return O=function(){return e},e}var j=function(e){var n=e.siteTitle,t=e.setCurrentUser,r=e.setLoginSuccessful;return a.a.createElement("header",{style:{background:g}},a.a.createElement(C,null,a.a.createElement(U,null,a.a.createElement(m.a,{to:"/",onClick:function(){sessionStorage.setItem("tab","Welcome"),document.location.reload()},style:{color:p,textDecoration:"none"}},n," "),a.a.createElement(L,{onClick:function(){sessionStorage.clear(),t(void 0),r(!1)}},"Sign Out"))))},C=s.b.div(O()),U=s.b.h1(x()),L=s.b.span(k());j.propTypes={siteTitle:f.a.string},j.defaultProps={siteTitle:""};var T=j,D=t(182),I=t.n(D),M=(t(161),t(184)),_=t.n(M),F=t(185),P=t.n(F),R=function(){var e=_()(I.a.mark(function e(n,t){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get(n,{params:{token:t}}).then(function(e){return e&&e.data}).catch(function(e){return console.error("GET-error: ",e),{error:e}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),Y=function(){var e=_()(I.a.mark(function e(n,t,r){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post(n,t,{params:{token:r}}).then(function(e){return console.log("POST-response: ",e),e&&e.data}).catch(function(e){return console.error("POST-error: ",e),{error:e}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(n,t,r){return e.apply(this,arguments)}}(),A=function(){var e=_()(I.a.mark(function e(n,t,r){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.put(n,t,{params:{token:r}}).then(function(e){return console.log("PUT-response",e),e&&e.data}).catch(function(e){return console.error("PUT-error: ",e),{error:e}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(n,t,r){return e.apply(this,arguments)}}(),X=function(){var e=_()(I.a.mark(function e(n,t){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.delete(n).then(function(e){return console.log("DELETE-response: ",e),e&&e.data}).catch(function(e){return console.error("DELETE-error: ",e),{error:e}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),z="https://pure-ridge-86504.herokuapp.com",V="https://cdn.iconscout.com/icon/premium/png-256-thumb/human-user-profile-man-face-avatar-51412.png";function B(){var e=c()(["\n  width: 100%;\n  min-width: 50vw;\n  padding: 0.5rem;\n  background-color: ",";\n  color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  outline: none;\n  resize: none;\n"]);return B=function(){return e},e}var q=function(e){var n=e.value,t=e.setValue,r=e.rows,o=e.setRows,u=e.placeholder,i=e.id;return a.a.createElement(H,{id:i,placeholder:u,rows:r,value:n,onChange:function(e){var n=e.target.rows;e.target.rows=1;var r=~~(e.target.scrollHeight/24);r===n&&(e.target.rows=r),r>=25&&(e.target.rows=25,e.target.scrollTop=e.target.scrollHeight),t(e.target.value),o(r<25?r:25)}})},H=s.b.textarea(B(),b,p,p);function W(e){var n=Object(r.useState)(!1),t=n[0],a=n[1];function o(n){n.key===e&&a(!0)}var u=function(n){n.key===e&&a(!1)};return Object(r.useEffect)(function(){return window.addEventListener("keydown",o),window.addEventListener("keyup",u),function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",u)}},[]),t}function N(){var e=c()(["\n  padding: 0.6rem 0.6rem;\n  font-size: 1.5em;\n  border: none;\n  border-radius: 10rem;\n  background-color: ",";\n  color: ",";\n"]);return N=function(){return e},e}function Q(){var e=c()(["\n  background-color: ",";\n  padding: 1rem;\n  display: flex;\n  justify-content: space-evenly;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]);return Q=function(){return e},e}var K=function(e,n){setTimeout(function(){e(""),n(1),window.scrollTo(0,document.body.scrollHeight)},100)},J=function(e){var n=e.userId,t=e.setDbUpdate,o=e.dbUpdate,u=e.currentUser,i=Object(r.useState)(""),c=i[0],l=i[1],s=Object(r.useState)(1),m=s[0],d=s[1],f=Object(r.useState)(!1),g=f[0],p=f[1],b=W("Enter");return Object(r.useEffect)(function(){setTimeout(function(){return K(l,d)},200)},[]),b&&!g&&c&&(p(!0),Y(z+"/messages",{text:c,user:n},u.username).then(function(e){t(!o),document.getElementById("ChatInput").focus(),setTimeout(function(){return K(l,d)},200),setTimeout(function(){return p(!1)},1e3)})),a.a.createElement(a.a.Fragment,null,a.a.createElement(G,null,a.a.createElement(q,{id:"ChatInput",placeholder:"Message...",value:c,setValue:l,rows:m,setRows:d}),a.a.createElement(Z,{onClick:function(){c&&!g&&(p(!0),Y(z+"/messages",{text:c,user:n},u.username).then(function(e){t(!o),document.getElementById("ChatInput").focus(),setTimeout(function(){return K(l,d)},200)}))}},"➣")))},G=s.b.div(Q(),b),Z=s.b.button(N(),p,h);function $(){var e=c()(["\n  width: ","rem;\n  height: ","rem;\n  border-radius: 5rem;\n  margin: ",";\n  visibility: ",";\n"]);return $=function(){return e},e}var ee=function(e){var n=e.image,t=e.isVisible,r=e.size,o=e.margin;return a.a.createElement(ne,{isVisible:n&&t,margin:o,src:n,size:r,alt:"Image unavailable"})},ne=s.b.img($(),function(e){return e.size},function(e){return e.size},function(e){return e.margin},function(e){return e.isVisible?"visible":"hidden"});function te(){var e=c()(["\n  background-color: inherit;\n  outline: none;\n  color: ",";\n  margin: 1rem;\n  padding: 1.5rem 0.5rem;\n"]);return te=function(){return e},e}function re(){var e=c()(["\n  color: ",";\n  border-radius: 1rem;\n  margin-left: 0.5rem;\n  padding: 0 0.3rem;\n  :hover {\n    color: ",";\n  }\n"]);return re=function(){return e},e}function ae(){var e=c()(["\n  margin: 0.1rem 0.8rem;\n  padding: 0;\n  color: ",";\n"]);return ae=function(){return e},e}function oe(){var e=c()(["\n  margin: 0 1rem;\n  padding: 0;\n  color: ",";\n"]);return oe=function(){return e},e}function ue(){var e=c()(["\n  background-color: ",";\n  margin: 0 0.2rem;\n  padding: 0.5rem 0.7rem;\n  display: flex;\n  justify-content: ",";\n  align-items: flex-start;\n  border-radius: 1rem;\n  word-break: break-word;\n\n  :hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"]);return ue=function(){return e},e}function ie(){var e=c()(["\n  color: ",";\n  margin: 0;\n  padding: "," 0.5rem 0 0.5rem;\n  border-radius: 0.3rem;\n  display: flex;\n  flex-direction: ",";\n  max-width: 100%;\n"]);return ie=function(){return e},e}var ce=function(e){var n=e.message,t=e.isFirstMessage,o=e.users,u=e.setDbUpdate,i=e.dbUpdate,c=e.isCurrentUser,l=e.currentUser,s=Object(r.useRef)(null),m=Object(r.useState)(!1),d=m[0],f=m[1],g=Object(r.useState)(!1),p=g[0],b=g[1],v=Object(r.useState)(n.text),h=v[0],E=v[1],y=o&&o.find(function(e){return e._id===n.user});Object(r.useEffect)(function(){return document.addEventListener("mousedown",w,!1),function(){return document.removeEventListener("mousedown",w,!1)}},[]);var w=function(e){s.current&&!s.current.contains(e.target)&&"EditButton"!==e.target.id&&b(!1)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(le,{isCurrentUser:c,isFirstMessage:t,ref:s},a.a.createElement(ee,{image:y&&y.image||V,isVisible:t,margin:(!c&&t?"1.6rem":c&&t?"-0.11rem":0)+" 0.5rem 0 0.3rem",size:2.5}),a.a.createElement("div",null,!c&&t&&a.a.createElement(de,null,y&&y.username),a.a.createElement(se,{empty:!n.text||!n.text.trim(),isCurrentUser:c,onClick:function(){return!p&&f(!d)}},!p&&h,p&&a.a.createElement(ge,{value:h,onChange:function(e){E(e.target.value)}}),c&&d&&a.a.createElement(a.a.Fragment,null,!p&&a.a.createElement(fe,{id:"EditButton",onClick:function(e){e.preventDefault(),e.stopPropagation(),b(!0)}},"✎"),p&&a.a.createElement(fe,{onClick:function(e){e.preventDefault(),e.stopPropagation(),b(!1),A(z+"/messages/"+n._id,{text:h},l.username).then(function(e){u(!i)})}},"✓"),a.a.createElement(fe,{onClick:function(e){e.preventDefault(),X(z+"/messages/"+n._id,l.username).then(function(e){u(!i)})}},"✕"))),d&&a.a.createElement(me,null,n.createdAt&&new Date(n.updatedAt?n.updatedAt:n.createdAt).toLocaleString()))))},le=s.b.div(ie(),p,function(e){return e.isFirstMessage?"1rem":"0.3rem"},function(e){return e.isCurrentUser?"row-reverse":"row"}),se=s.b.p(ue(),function(e){return e.isCurrentUser?v:y},function(e){return e.empty?"flex-end":"space-between"},y),me=s.b.p(oe(),y),de=s.b.p(ae(),y),fe=s.b.span(re(),p,p),ge=s.b.textarea(te(),p);function pe(){var e=c()(["\n  min-height: 50vh;\n"]);return pe=function(){return e},e}function be(){var e=c()(["\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  padding: 0.5rem 0.8rem 4rem;\n"]);return be=function(){return e},e}var ve=function(e){var n=e.users,t=e.currentUser,o=Object(r.useState)(void 0),u=o[0],i=o[1],c=Object(r.useState)(!1),l=c[0],s=c[1];return Object(r.useEffect)(function(){R(z+"/messages",t.username).then(function(e){i(e)})},[l]),a.a.createElement(he,null,a.a.createElement(Ee,null,u&&Array.isArray(u)&&u.map(function(e,r){return a.a.createElement(ce,{key:e._id,message:e,isFirstMessage:0===r||u[r-1].user!==e.user,users:n,setDbUpdate:s,dbUpdate:l,isCurrentUser:t._id===e.user,currentUser:t})}),a.a.createElement(J,{userId:t._id,messages:u,setMessages:i,setDbUpdate:s,dbUpdate:l,currentUser:t})))},he=s.b.div(be()),Ee=s.b.div(pe());t(34);function ye(){var e=c()(["\n  display: flex;\n  background-color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  outline: none;\n  color: ",";\n  margin: 1rem;\n  padding: 0.5rem;\n"]);return ye=function(){return e},e}var we=function(e){var n=e.placeholder,t=e.type,r=e.value,o=e.setValue;return a.a.createElement(Se,{placeholder:n,type:t,value:r,onChange:function(e){return o(e.target.value)}})},Se=s.b.input(ye(),b,p,p);function ke(){var e=c()(["\n  color: orange;\n\n  :hover {\n    color: white;\n    cursor: pointer;\n  }\n"]);return ke=function(){return e},e}function xe(){var e=c()(["\n  background-color: ",";\n  color: ",";\n  padding: 0.5rem 3rem;\n  margin: 1rem;\n\n  :hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"]);return xe=function(){return e},e}function Oe(){var e=c()(["\n  margin-top: 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 20rem;\n  text-align: center;\n"]);return Oe=function(){return e},e}var je=function(e){var n=e.setCurrentUser,t=e.setSignup,o=e.signUpSuccessful,u=e.setLoginSuccessful,i=Object(r.useState)(!1),c=i[0],l=i[1],s=Object(r.useState)(""),m=s[0],d=s[1],f=Object(r.useState)(""),g=f[0],p=f[1],b=Object(r.useState)(""),v=b[0],h=b[1],E=Object(r.useState)(0),y=E[0],w=E[1];return Object(r.useEffect)(function(){setTimeout(function(){return l(!0)},200)},[]),Object(r.useEffect)(function(){R(z+"/users").then(function(e){e.error||h(e)})},[y]),a.a.createElement(Ce,null,c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Login"),a.a.createElement(we,{placeholder:"Username",type:"text",value:m,setValue:d}),a.a.createElement(we,{placeholder:"Password",type:"password",value:g,setValue:p}),a.a.createElement(Ue,{onClick:function(){Te(m,g,n,v,u),setTimeout(function(){return w(y+1)},200)}},"Login"),y>0&&a.a.createElement("p",{style:{color:"red"}},"Invalid login (",y,")"),!o&&a.a.createElement("p",null,"Sign up ",a.a.createElement(Le,{onClick:function(){return t(!0)}},"here")),a.a.createElement("br",null),o&&a.a.createElement("p",null,"Sign up successful! You can now log in with your new username and password.")))},Ce=s.b.div(Oe()),Ue=s.b.button(xe(),b,p,E),Le=s.b.span(ke()),Te=function(e,n,t,r,a){void 0===e&&(e={}.MOCK_USER),void 0===n&&(n={}.MOCK_PASSWORD),sessionStorage.clear();var o=r&&r.find(function(t){return t.username===e&&t.password===n});o?(sessionStorage.setItem("username",e),sessionStorage.setItem("password",n),A(z+"/users/"+o._id,Object.assign({},o,{updatedAt:new Date}),o.username).then(function(e){a(!0),t(o)})):t(void 0)};function De(){var e=c()(["\n  padding: 5rem;\n  text-align: center;\n"]);return De=function(){return e},e}var Ie=function(e){var n=e.currentUser;return a.a.createElement(Me,null,a.a.createElement(ee,{image:n.image||V,isVisible:!0,margin:"0 0.5rem 0 0",size:10}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("h2",null,"Welcome ",n.username),a.a.createElement("p",null,"In the tabs above you can see other registered users, ",a.a.createElement("br",null),"use MyChat as well as sign out."))},Me=s.b.div(De()),_e=(t(167),t(205),t(158),t(7)),Fe=t.n(_e);function Pe(){var e=c()(["\n          z-index: 40;\n        "]);return Pe=function(){return e},e}function Re(){var e=c()(["\n          position: relative;\n          z-index: 2500;\n          color: orange;\n          opacity: 0.8;\n          cursor: grabbing;\n        "]);return Re=function(){return e},e}function Ye(){var e=c()(["\n  padding: 0 !important;\n  margin: 0;\n  touch-action: none;\n  cursor: grab;\n  transition: color 0.3s ease-out;\n  transition: opacity 0.3s ease-out;\n\n  ",";\n"]);return Ye=function(){return e},e}var Ae=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).state={isDragging:!1,originalX:0,originalY:0,translateX:0,translateY:0,lastTranslateX:0,lastTranslateY:0},n.handleTouchStart=function(e,t){e.touches[0]&&(e.stopPropagation(),e.preventDefault(),window.addEventListener("touchmove",function(e){return n.handleTouchMove(e,t)}),window.addEventListener("touchend",n.handleTouchEnd),n.props.onDragStart&&n.props.onDragStart({x:e.touches[0].clientX,y:e.touches[0].clientY}),n.setState({originalX:e.touches[0].clientX,originalY:e.touches[0].clientY,isDragging:!0}))},n.moveAlongAxis=function(e,t){var r=n.props.onDrag;n.setState(function(n){var r;return(r={})["translate"+t]=e.touches[0]["client"+t]-n["original"+t]+n["lastTranslate"+t],r},function(){var e;r&&r(((e={})[t.toLowerCase()]=n.state["translate"+t],e["lastTranslate"+t]=n.state["lastTranslate"+t],e["original"+t]=n.state["original"+t],e))})},n.handleTouchMove=function(e,t){if(e.touches[0]&&(e.stopPropagation(),e.preventDefault(),n.state.isDragging))switch(t){case"X":n.moveAlongAxis(e,"X");break;case"Y":n.moveAlongAxis(e,"Y");break;default:return n.moveAlongAxis(e,"X"),void n.moveAlongAxis(e,"Y")}},n.handleTouchEnd=function(e){e.stopPropagation(),window.removeEventListener("touchmove",n.handleTouchMove),window.removeEventListener("touchend",n.handleTouchEnd),n.setState({originalX:0,originalY:0,translateX:0,translateY:0,lastTranslateX:0,lastTranslateY:0,isDragging:!1},function(){n.props.onDragEnd&&n.props.onDragEnd({x:n.state.lastTranslateX,y:n.state.lastTranslateY})})},n.handleMouseDown=function(e){var t=e.clientX,r=e.clientY;window.addEventListener("mousemove",n.handleMouseMove),window.addEventListener("mouseup",n.handleMouseUp),n.props.onDragStart&&n.props.onDragStart(),n.setState({originalX:t,originalY:r,isDragging:!0})},n.handleMouseMove=function(e){var t=e.clientX,r=e.clientY,a=n.state.isDragging,o=n.props.onDrag;a&&n.setState(function(e){return{translateX:t-e.originalX+e.lastTranslateX,translateY:r-e.originalY+e.lastTranslateY}},function(){o&&o({translateX:n.state.translateX,translateY:n.state.translateY})})},n.handleMouseUp=function(){window.removeEventListener("mousemove",n.handleMouseMove),window.removeEventListener("mouseup",n.handleMouseUp),n.setState({originalX:0,originalY:0,lastTranslateX:n.state.translateX,lastTranslateY:n.state.translateY,isDragging:!1},function(){n.props.onDragEnd&&n.props.onDragEnd()})},n}Fe()(n,e);var t=n.prototype;return t.componentWillUnmount=function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd)},t.render=function(){var e=this,n=this.props,t=n.children,r=n.draggableStyle,o=this.state,u=o.translateX,i=o.translateY,c=o.isDragging;return a.a.createElement(Xe,{onMouseDown:this.handleMouseDown,onTouchStart:function(n){e.handleTouchStart(n,"Y")},x:u,y:i,isDragging:c,style:r},t)},n}(a.a.Component),Xe=s.b.div.attrs({style:function(e){return{transform:"translate("+e.x+"px, "+e.y+"px)"}}})(Ye(),function(e){return e.isDragging?Object(s.a)(Re()):Object(s.a)(Pe())}),ze=(t(206),t(35),t(37),function(e,n){var t="000000000"+e;return t.substr(t.length-n)}),Ve=function(e,n){if(!e)return"--/--/----";var t=new Date(e),r=t.toLocaleDateString(),a=t.getHours(),o=t.getMinutes();return r+(n?"":" - "+ze(a,2)+":"+ze(o,2))},Be=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})};function qe(){var e=c()(["\n  width: 100%;\n"]);return qe=function(){return e},e}function He(){var e=c()(["\n  background-color: inherit;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid ",";\n  color: ",";\n"]);return He=function(){return e},e}function We(){var e=c()(["\n  background-color: inherit;\n  padding: 0;\n  margin: 0;\n  margin-left: 0.5rem;\n"]);return We=function(){return e},e}function Ne(){var e=c()(["\n  background-color: #a40000;\n"]);return Ne=function(){return e},e}function Qe(){var e=c()(["\n  margin-top: 0.5rem;\n  border-top: 1px solid #3b3b3b;\n"]);return Qe=function(){return e},e}function Ke(){var e=c()(["\n  :hover {\n    color: ",";\n  }\n"]);return Ke=function(){return e},e}function Je(){var e=c()(["\n  color: ",";\n"]);return Je=function(){return e},e}function Ge(){var e=c()(["\n  font-size: small;\n  margin: 0;\n  padding: 0;\n"]);return Ge=function(){return e},e}function Ze(){var e=c()(["\n  list-style: none;\n  padding-left: 0;\n  margin: 0;\n"]);return Ze=function(){return e},e}function $e(){var e=c()(["\n  display: flex;\n  justify-content: space-between;\n"]);return $e=function(){return e},e}function en(){var e=c()(["\n  height: 49%;\n"]);return en=function(){return e},e}function nn(){var e=c()(["\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: space-between;\n  min-height: 8rem;\n"]);return nn=function(){return e},e}function tn(){var e=c()(["\n  border: 1px solid ",";\n  padding: 0.5rem;\n  background: inherit;\n  color: ",";\n  width: 100%;\n"]);return tn=function(){return e},e}function rn(){var e=c()(["\n  display: flex;\n  margin: 0.5rem 0;\n  min-height: 8rem;\n"]);return rn=function(){return e},e}function an(){var e=c()(["\n  margin: 0.5rem 0;\n"]);return an=function(){return e},e}function on(){var e=c()(["\n  margin-left: 0.5rem;\n  padding: 0.2rem 0.8rem 0;\n  border-radius: 0.2rem;\n  opacity: 0.8;\n\n  :hover {\n    cursor: pointer;\n    opacity: 1;\n  }\n"]);return on=function(){return e},e}function un(){var e=c()(["\n  color: ",";\n  font-size: small;\n"]);return un=function(){return e},e}function cn(){var e=c()(["\n  color: ",";\n  margin-right: 0.5rem;\n  line-height: 1rem;\n"]);return cn=function(){return e},e}function ln(){var e=c()(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return ln=function(){return e},e}function sn(){var e=c()(["\n  border: 1px solid ",";\n  border-radius: 5rem;\n  padding: 0.2rem 0.6rem;\n  margin-right: 0.5rem;\n  margin-top: -0.3rem;\n"]);return sn=function(){return e},e}function mn(){var e=c()(["\n  display: flex;\n  justify-content: space-between;\n  padding: 0;\n  margin: 0;\n"]);return mn=function(){return e},e}function dn(){var e=c()(["\n  display: flex;\n  align-items: center;\n"]);return dn=function(){return e},e}function fn(){var e=c()(["\n  cursor: pointer;\n  width: 100%;\n  min-width: 16rem;\n"]);return fn=function(){return e},e}function gn(){var e=c()(["\n  display: flex;\n  padding: 0.6rem;\n"]);return gn=function(){return e},e}function pn(){var e=c()(["\n  background-color: ",";\n  border: none;\n  color: ",";\n"]);return pn=function(){return e},e}var bn=function(e){var n=e.habit,t=e.addOccasion,o=e.deleteHabit,u=e.currentUser,i=n.name,c=n.title,l=n.description,s=n.rank,m=n.occasions,d=Object(r.useState)(m),f=d[0],g=d[1],p=Object(r.useState)(!1),b=p[0],v=p[1],h=Object(r.useState)(!1),E=h[0],y=h[1],w=Object(r.useState)(!1),S=w[0],k=w[1],x=Object(r.useState)(l),O=x[0],j=x[1],C=Object(r.useState)(l),U=C[0],L=C[1],T=Object(r.useState)(!1),D=T[0],I=T[1],M=Object(r.useState)(""),_=M[0],F=M[1],P=function(e,t){f&&g(f.map(function(n){return n._id===e?Object.assign({},n,{note:t}):n})),A(z+"/habits/"+n._id,Object.assign({},n,{occasions:f?f.map(function(n){return n._id===e?Object.assign({},n,{note:t}):n}):[]}),u.username)},R=function(e){f&&g(f.filter(function(n){return n._id!==e})),A(z+"/habits/"+n._id,Object.assign({},n,{occasions:f?f.filter(function(n){return n._id!==e}):[]}),u.username)};return a.a.createElement(hn,{id:i},a.a.createElement(En,null,a.a.createElement(In,{onClick:function(){return v(!b)}},a.a.createElement(yn,null,a.a.createElement(Sn,null,s),a.a.createElement(kn,null,a.a.createElement(xn,null,c),a.a.createElement(On,null,0!==f.length&&Ve(f[0].time,!0)))),a.a.createElement(wn,null,a.a.createElement("div",null,!D&&a.a.createElement(jn,{onClick:function(e){e.stopPropagation(),I(!0)}},"+"),D&&a.a.createElement(a.a.Fragment,null,a.a.createElement(jn,{onClick:function(e){e.stopPropagation(),t(i,_),I(!1)}},"✓"),a.a.createElement(jn,{onClick:function(e){e.stopPropagation(),I(!1)}},"✕")),b&&a.a.createElement(Yn,{onClick:function(e){e.preventDefault(),X(z+"/habits/"+n._id,u.username).then(function(e){o(n._id)})}},"✕")))),D&&a.a.createElement(In,null,a.a.createElement(Rn,{style:{width:"100%"}},a.a.createElement(zn,{onChange:function(e){return F(e.target.value)}}))),b&&a.a.createElement(Rn,null,!S&&a.a.createElement(Cn,{onClick:function(){return k(!0)}},U),S&&a.a.createElement(Un,null,a.a.createElement(Ln,{value:O,onChange:function(e){return j(e.target.value)}}),a.a.createElement(Tn,null,a.a.createElement(Dn,{onClick:function(){""===O&&j("Enter description here..."),L(""===O?"Enter description here...":O),A(z+"/habits/"+n._id,Object.assign({},n,{description:O}),u.username),k(!1)}},"Save"),a.a.createElement(Dn,{onClick:function(){k(!1),j(U)}},"Cancel"))),0!==f.length&&a.a.createElement(Mn,null,E?a.a.createElement(a.a.Fragment,null,f.map(function(e,n){return n<10&&a.a.createElement(Vn,{occasion:e,index:n,onUpdateOccasion:P,onDeleteOccasion:R})}),a.a.createElement(_n,{onClick:function(e){e.stopPropagation(),y(!1)}},a.a.createElement(Pn,null,"Hide history"))):a.a.createElement(_n,{onClick:function(e){e.stopPropagation(),y(!0)}},a.a.createElement(Pn,null,"Show history"))))))},vn=s.b.button(pn(),y,p),hn=s.b.div(gn()),En=s.b.div(fn()),yn=s.b.div(dn()),wn=s.b.div(mn()),Sn=s.b.span(sn(),p),kn=s.b.div(ln()),xn=s.b.label(cn(),p),On=s.b.label(un(),S),jn=Object(s.b)(vn)(on()),Cn=s.b.p(an()),Un=s.b.div(rn()),Ln=s.b.textarea(tn(),y,w),Tn=s.b.div(nn()),Dn=Object(s.b)(vn)(en()),In=s.b.div($e()),Mn=s.b.ul(Ze()),_n=s.b.li(Ge()),Fn=s.b.span(Je(),S),Pn=s.b.span(Ke(),S),Rn=s.b.div(Qe()),Yn=Object(s.b)(jn)(Ne()),An=Object(s.b)(jn)(We()),Xn=s.b.input(He(),S,S),zn=Object(s.b)(Xn)(qe()),Vn=function(e){var n=e.occasion,t=e.index,o=e.onUpdateOccasion,u=e.onDeleteOccasion,i=Object(r.useState)(!1),c=i[0],l=i[1],s=Object(r.useState)(n.note),m=s[0],d=s[1];return a.a.createElement(_n,{key:n.time+"-"+t,onClick:function(e){e.stopPropagation(),l(!c),c&&o(n._id,m)}},a.a.createElement(Fn,null,Ve(n.time),n.note&&":")," ",!c&&n.note,c&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Xn,{value:m,onClick:function(e){return e.stopPropagation()},onChange:function(e){return d(e.target.value)}}),a.a.createElement(An,{onClick:function(e){e.stopPropagation(),u(n._id)}},"✕")))},Bn=function(e){var n=e.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:n.top+r,left:n.left+t}},qn=function(e,n){return e.rank<n.rank?-1:e.rank>n.rank?1:0},Hn=function(e){var n=e.listData,t=e.onListUpdate,o=e.currentUser,u=e.setListOrder,i=Object(r.useState)(n||["hello"]),c=i[0],l=i[1],s=Object(r.useState)({}),m=s[0],d=s[1],f=Object(r.useState)({})[1],g=Object(r.useState)(0),p=g[0],b=g[1],h=Object(r.useState)(void 0),E=h[0],y=h[1];Object(r.useEffect)(function(){l(n)},[n]);var w=function(e,n){t(c.map(function(t){return t.name===e?Object.assign({},t,{occasions:(r={_id:Be(),time:new Date,note:n},a=t.occasions,o=a.slice(),o.unshift(r),o)}):t;var r,a,o}))},S=function(e){t(c.filter(function(n){return n._id!==e}).map(function(e,n){return Object.assign({},e,{rank:n+1})}))},k=function(e){var n=c.findIndex(function(n){return n.name===e.name}),t=c.map(function(e,t){return function(e,n,t,r){var a=Bn(document.getElementById(n.name)).top;return t>r?a<p?(y(Object.assign({},e[r],{rank:n.rank})),Object.assign({},n,{rank:n.rank-1})):n:t<r?a>p?((t-1<0||p>Bn(document.getElementById(e[t-1].name)).top)&&y(Object.assign({},e[r],{rank:n.rank,topValue:!0})),Object.assign({},n,{rank:n.rank+1})):n:(console.log("Moved: ",n.name),n)}(c,e,t,n)});l(t),u(t)};Object(r.useEffect)(function(){if(E){var e=c.map(function(e){return e.name===E.name?E:e});l(e),u(e)}},[E]);var x=c.sort(qn);return a.a.createElement(a.a.Fragment,null,x&&x.map(function(e){return a.a.createElement(Ae,{key:e.name,onDragStart:function(n){return function(e,n){e&&f(Object.assign({name:n},e))}(n,e.name)},onDrag:function(n){return function(e,n){document.getElementById(n)&&b(Bn(document.getElementById(n)).top),d(Object.assign({name:n},e))}(n,e.name)},onDragOver:function(e){return e.preventDefault()},onDragEnd:function(){return k(m)},draggableStyle:{backgroundColor:v,margin:"1rem 0",padding:"1rem",width:"100%",zIndex:"20"}},a.a.createElement(bn,{habit:e,addOccasion:w,deleteHabit:S,currentUser:o}))}))};function Wn(){var e=c()(["\n  padding: 0.6rem 0.6rem;\n  font-size: 1.5em;\n  border: none;\n  border-radius: 10rem;\n  background-color: ",";\n  color: ",";\n"]);return Wn=function(){return e},e}function Nn(){var e=c()(["\n  margin-bottom: 5rem;\n"]);return Nn=function(){return e},e}function Qn(){var e=c()(["\n  background-color: ",";\n  padding: 1rem;\n  display: flex;\n  justify-content: space-evenly;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]);return Qn=function(){return e},e}function Kn(){var e=c()(["\n  background-color: ",";\n  color: ",";\n  width: 50%;\n  padding: 0.8rem 0;\n  border: none;\n\n  :hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n\n  :active {\n    background-color: ",";\n  }\n"]);return Kn=function(){return e},e}function Jn(){var e=c()(["\n  width: 100%;\n"]);return Jn=function(){return e},e}function Gn(){var e=c()(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin: 0 0.5rem;\n  align-items: center;\n"]);return Gn=function(){return e},e}Hn.defaultProps={listData:[],onListUpdate:function(){}};var Zn=s.b.div(Gn()),$n=s.b.div(Jn()),et=s.b.button(Kn(),function(e){return e.selected?y:h},p,y,function(e){return e.selected?y:h}),nt=function(e){e.users;var n=e.currentUser,t=Object(r.useState)([]),o=t[0],u=t[1],i=Object(r.useState)(!1),c=i[0],l=i[1],s=Object(r.useState)(""),m=s[0],d=s[1],f=Object(r.useState)(1),g=f[0],p=f[1],b=W("Enter");Object(r.useEffect)(function(){n&&R(z+"/habits",n.username).then(function(e){u(e)})},[]);var v=function(e){e.forEach(function(e){A(z+"/habits/"+e._id,e,n.username)}),u(e)},h=function(e){Y(z+"/habits",e,n.username).then(function(e){R(z+"/habits",n.username).then(function(e){u(e)}),document.getElementById("HabitInput").focus(),setTimeout(function(){return K(d,p)},200),setTimeout(function(){return l(!1)},1e3)})},E=o.map(function(e){return e&&Object.assign({name:e.title&&e.title.toLowerCase()},e)});return b&&!c&&m&&(l(!0),h({title:m,description:"Enter description here...",startDate:new Date,endDate:new Date,occasions:[],rank:o.length+1})),a.a.createElement(Zn,null,a.a.createElement($n,null,E.length>0&&a.a.createElement(Hn,{listData:E,onListUpdate:v,setListOrder:u,currentUser:n})),a.a.createElement(rt,{onClick:function(){return v(o)}},"Save order"),a.a.createElement(tt,null,a.a.createElement(q,{id:"HabitInput",placeholder:"New habit...",value:m,setValue:d,rows:g,setRows:p}),a.a.createElement(at,{onClick:function(){l(!0),!c&&h({title:m,description:"Enter description here...",startDate:new Date,endDate:new Date,occasions:[],rank:o.length+1}),setTimeout(function(){return K(d,p)},200),setTimeout(function(){return l(!1)},1e3)}},"➣")))},tt=s.b.div(Qn(),b),rt=Object(s.b)(et)(Nn()),at=s.b.button(Wn(),p,h);function ot(){var e=c()(["\n  background-color: ",";\n  color: ",";\n  padding: 0.5rem 3rem;\n  margin: 1rem;\n\n  :hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"]);return ot=function(){return e},e}function ut(){var e=c()(["\n  display: flex;\n  text-align: center;\n  flex-direction: column;\n  justify-content: center;\n"]);return ut=function(){return e},e}var it=function(e){var n=e.setSignup,t=e.setSignUpSuccessful,o=Object(r.useState)(!1),u=o[0],i=o[1],c=Object(r.useState)(""),l=c[0],s=c[1],m=Object(r.useState)(""),d=m[0],f=m[1],g=Object(r.useState)(""),p=g[0],b=g[1],v=Object(r.useState)(""),h=v[0],E=v[1],y=Object(r.useState)(""),w=y[0],S=y[1],k=Object(r.useState)(""),x=k[0],O=k[1],j=Object(r.useState)(""),C=j[0],U=j[1],L=Object(r.useState)(""),T=L[0],D=L[1],I=Object(r.useState)(0),M=I[0],_=I[1];return Object(r.useEffect)(function(){setTimeout(function(){return i(!0)},200)},[]),Object(r.useEffect)(function(){R(z+"/users","Unauthorized").then(function(e){D(e)})},[M]),a.a.createElement(ct,null,u&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Sign Up"),a.a.createElement(we,{placeholder:"Username",type:"text",value:l,setValue:s}),a.a.createElement(we,{placeholder:"E-mail",type:"text",value:d,setValue:f}),a.a.createElement(we,{placeholder:"Password",type:"password",value:p,setValue:b}),a.a.createElement(we,{placeholder:"First name",type:"text",value:h,setValue:E}),a.a.createElement(we,{placeholder:"Last name",type:"text",value:w,setValue:S}),a.a.createElement(we,{placeholder:"Location",type:"text",value:x,setValue:O}),a.a.createElement(we,{placeholder:"Image url",type:"text",value:C,setValue:U}),a.a.createElement(ee,{image:C||V,isVisible:!0,margin:"0 auto 2rem",size:10}),a.a.createElement(lt,{onClick:function(){_(M+1),st({username:l,email:d,password:p,firstname:h,lastname:w,location:x,image:C},T,t),sessionStorage.clear(),n(!1)}},"Sign Up"),M>0&&a.a.createElement("p",{style:{color:"red"}},"Invalid sign up (",M,")")))},ct=s.b.div(ut()),lt=s.b.button(ot(),b,p,E),st=function(e,n,t){n&&n.find(function(n){return n.username===e.username||n.email===e.email})||(Y(z+"/users",e,"Unauthorized").then(function(e){console.log("USER-CREATE-response: ",e)}),t(!0))};function mt(){var e=c()(["\n  display: flex;\n  flex-direction: column;\n"]);return mt=function(){return e},e}function dt(){var e=c()(["\n  background-color: inherit;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid ",";\n  color: ",";\n  margin: 0 0 1rem 0;\n  padding: 0.5rem 0.5rem;\n"]);return dt=function(){return e},e}function ft(){var e=c()(["\n  color: ",";\n"]);return ft=function(){return e},e}function gt(){var e=c()(["\n  color: ",";\n  margin-left: 0.5rem;\n  padding: 0.4rem 0.5rem 0.3rem;\n  cursor: pointer;\n  :hover {\n    color: ",";\n  }\n"]);return gt=function(){return e},e}function pt(){var e=c()(["\n  height: 5rem;\n  display: flex;\n  align-items: center;\n"]);return pt=function(){return e},e}function bt(){var e=c()(["\n  margin: 0.2rem 0;\n"]);return bt=function(){return e},e}function vt(){var e=c()(["\n  margin: 0;\n"]);return vt=function(){return e},e}function ht(){var e=c()(["\n  background-color: ",";\n  padding: ",";\n  margin: 0.5rem auto;\n  width: 100%;\n  max-width: 500px;\n  cursor: pointer;\n  :hover {\n    color: ",";\n  }\n"]);return ht=function(){return e},e}var Et=function(e){var n=e.user,t=e.isCurrentUser,o=e.updateUsers,u=e.setUpdateUsers,i=Object(r.useState)(!1),c=i[0],l=i[1],s=Object(r.useState)(!1),m=s[0],d=s[1],f=Object(r.useState)(n.username),g=f[0],p=f[1],b=Object(r.useState)(n.firstname),v=b[0],h=b[1],E=Object(r.useState)(n.lastname),y=E[0],w=E[1],S=Object(r.useState)(n.location),k=S[0],x=S[1],O=Object(r.useState)(n.image),j=O[0],C=O[1];return a.a.createElement(yt,{isCurrentUser:t,expandedView:c,onClick:function(){return!m&&l(!c)}},a.a.createElement(kt,null,a.a.createElement(ee,{image:n.image||V,isVisible:!0,margin:"0 0.5rem 0 0",size:c?5:3}),a.a.createElement(wt,null,g),!m&&t&&a.a.createElement(xt,{id:"EditButton",onClick:function(e){e.preventDefault(),e.stopPropagation(),l(!0),d(!0)}},"✎"),m&&a.a.createElement(a.a.Fragment,null,a.a.createElement(xt,{onClick:function(){d(!1),p(n.username),h(n.firstname),w(n.lastname),x(n.location),C(n.image)}},"Back ←"),a.a.createElement(xt,{onClick:function(e){e.preventDefault(),e.stopPropagation(),d(!1),A(z+"/users/"+n._id,Object.assign({},n,{username:g,firstname:v,lastname:y,location:k,image:j}),n.username).then(function(e){sessionStorage.setItem("username",g),u(!o)})}},"Save ✓"))),c&&a.a.createElement(a.a.Fragment,null,!m&&a.a.createElement(a.a.Fragment,null,a.a.createElement(St,null,a.a.createElement(Ot,null,"Full name:")," ",v," ",y),a.a.createElement(St,null,a.a.createElement(Ot,null,"Location:")," ",k),a.a.createElement(St,null,a.a.createElement(Ot,null,"Signed up:")," ",new Date(n.createdAt).toLocaleString()),a.a.createElement(St,null,a.a.createElement(Ot,null,"Latest log in:")," ",new Date(n.updatedAt).toLocaleString())),m&&a.a.createElement(Ct,null,a.a.createElement(Ot,null,"Username"),a.a.createElement(jt,{value:g,onChange:function(e){p(e.target.value)}}),a.a.createElement(Ot,null,"First name"),a.a.createElement(jt,{value:v,onChange:function(e){h(e.target.value)}}),a.a.createElement(Ot,null,"Last name"),a.a.createElement(jt,{value:y,onChange:function(e){w(e.target.value)}}),a.a.createElement(Ot,null,"Location"),a.a.createElement(jt,{value:k,onChange:function(e){x(e.target.value)}}),a.a.createElement(Ot,null,"Image URL"),a.a.createElement(jt,{value:j,onChange:function(e){C(e.target.value)}}),a.a.createElement(ee,{image:j||V,isVisible:!0,margin:"0 auto",size:10}))))},yt=s.b.div(ht(),function(e){return e.isCurrentUser?y:h},function(e){return e.expandedView?"1rem 0.6rem":"0 0.5rem"},S),wt=s.b.h2(vt()),St=s.b.p(bt()),kt=s.b.div(pt()),xt=s.b.span(gt(),p,S),Ot=s.b.label(ft(),y),jt=s.b.input(dt(),p,p),Ct=s.b.div(mt());function Ut(){var e=c()(["\n  margin: 0.5rem;\n  padding: 0;\n  width: 100%;\n"]);return Ut=function(){return e},e}var Lt=function(e){var n=e.currentUser,t=e.users,r=e.updateUsers,o=e.setUpdateUsers;return a.a.createElement(Tt,null,a.a.createElement(Et,{isCurrentUser:!0,user:n,updateUsers:r,setUpdateUsers:o}),t&&Array.isArray(t)&&t.filter(function(e){return e.username!==n.username}).map(function(e){return a.a.createElement(Et,{key:e.username,isCurrentUser:n.username===e.username,user:e,updateUsers:r,setUpdateUsers:o})}))},Tt=s.b.div(Ut());t(76),t(77);function Dt(){var e=c()(["\n  margin-left: 0.5rem;\n"]);return Dt=function(){return e},e}function It(){var e=c()(["\n  margin-left: -2.3rem;\n"]);return It=function(){return e},e}function Mt(){var e=c()(["\n  margin-right: 0.5rem;\n"]);return Mt=function(){return e},e}function _t(){var e=c()(["\n  width: 85%;\n  border-radius: 0;\n"]);return _t=function(){return e},e}function Ft(){var e=c()(["\n  width: 85%;\n  border-radius: 0;\n"]);return Ft=function(){return e},e}function Pt(){var e=c()(["\n  padding: 0.3rem;\n  border: 1px solid ",";\n  background-color: inherit;\n  color: inherit;\n"]);return Pt=function(){return e},e}function Rt(){var e=c()(["\n  border: none;\n  background: maroon;\n  color: ",";\n"]);return Rt=function(){return e},e}function Yt(){var e=c()(["\n  width: 100%;\n  margin-top: 1rem;\n"]);return Yt=function(){return e},e}function At(){var e=c()(["\n  width: 15%;\n  font-size: x-large;\n"]);return At=function(){return e},e}function Xt(){var e=c()(["\n  width: 85%;\n  margin-bottom: 0;\n"]);return Xt=function(){return e},e}function zt(){var e=c()(["\n  display: flex;\n"]);return zt=function(){return e},e}function Vt(){var e=c()(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0.5rem;\n"]);return Vt=function(){return e},e}function Bt(){var e=c()(["\n  margin-left: 0.6rem;\n  color: ",";\n"]);return Bt=function(){return e},e}function qt(){var e=c()(["\n  margin-left: 0.6rem;\n  -webkit-transform: translate(0%) rotate(45deg);\n  -moz-transform: translate(0%) rotate(45deg);\n  -o-transform: translate(0%) rotate(45deg);\n  transform: translate(0%) rotate(45deg);\n  color: ",";\n"]);return qt=function(){return e},e}function Ht(){var e=c()(["\n  color: ",";\n  margin-bottom: 0.3rem;\n"]);return Ht=function(){return e},e}function Wt(){var e=c()(["\n  border: 1px solid ",";\n  padding: 0.5rem;\n  background-color: inherit;\n  color: inherit;\n  resize: none;\n  min-height: 8rem;\n"]);return Wt=function(){return e},e}function Nt(){var e=c()(["\n  padding: 0.3rem;\n  border: 1px solid ",";\n  background-color: inherit;\n  color: inherit;\n"]);return Nt=function(){return e},e}function Qt(){var e=c()(["\n  background-color: ",";\n  color: ",";\n  padding: 0.5rem;\n  border: 1px solid ",";\n"]);return Qt=function(){return e},e}function Kt(){var e=c()(["\n  color: ",";\n"]);return Kt=function(){return e},e}function Jt(){var e=c()(["\n  opacity: 0.5;\n"]);return Jt=function(){return e},e}function Gt(){var e=c()([""]);return Gt=function(){return e},e}function Zt(){var e=c()(["\n  opacity: 0.5;\n"]);return Zt=function(){return e},e}function $t(){var e=c()([""]);return $t=function(){return e},e}function er(){var e=c()(["\n  border: 1px solid ",";\n  padding: 0.1rem 0.5rem;\n  margin-top: 0.2rem;\n  margin-right: 0.2rem;\n  margin-bottom: 0.2rem;\n  opacity: 0.9;\n\n  text-transform: lowercase;\n\n  :hover {\n    cursor: pointer;\n    border: 1px solid ",";\n    opacity: 1;\n  }\n"]);return er=function(){return e},e}function nr(){var e=c()(["\n  padding: 0.2rem 0;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: wrap;\n  div:nth-child(3) {\n    margin-top: -0.01rem;\n    border: 1px solid red;\n  }\n"]);return nr=function(){return e},e}function tr(){var e=c()(["\n  margin: 0;\n"]);return tr=function(){return e},e}function rr(){var e=c()(["\n  background-color: inherit;\n  border: none;\n  color: inherit;\n"]);return rr=function(){return e},e}function ar(){var e=c()(["\n  border: 1px solid ",";\n  color: ",";\n  background-color: inherit;\n  padding: 0.5rem;\n  width: 100%;\n  max-width: 90vw;\n"]);return ar=function(){return e},e}function or(){var e=c()(["\n  margin: 0rem;\n"]);return or=function(){return e},e}function ur(){var e=c()(["\n  list-style: none;\n  margin: 1rem 0;\n  padding: 0;\n"]);return ur=function(){return e},e}function ir(){var e=c()(["\n  border: 1px solid ",";\n  color: ",";\n  background-color: ",";\n  width: 100vw;\n  position: fixed;\n  display: flex;\n  justify-content: space-between;\n  font-size: larger;\n  padding: 1rem 1rem 0.5rem;\n  bottom: 0;\n"]);return ir=function(){return e},e}function cr(){var e=c()(["\n  color: ",";\n"]);return cr=function(){return e},e}function lr(){var e=c()(["\n  color: ",";\n  display: flex;\n  margin-bottom: 0.8rem;\n\n  :hover {\n    cursor: pointer;\n  }\n"]);return lr=function(){return e},e}function sr(){var e=c()(["\n  max-width: 90vw;\n  margin-top: 0.3rem;\n  margin-bottom: 3rem;\n  width: 100vw;\n"]);return sr=function(){return e},e}var mr=function(e){e.users;var n=e.currentUser,t=Object(r.useState)(!1),o=t[0],u=t[1],i=Object(r.useState)(!0),c=i[0],l=i[1],s=Object(r.useState)(""),m=s[0],d=s[1],f=Object(r.useState)([]),g=f[0],p=f[1],b=Object(r.useState)([]),v=b[0],h=b[1],E=Object(r.useState)(void 0),y=E[0],w=E[1],S=Object(r.useState)("name"),k=S[0],x=(S[1],Object(r.useState)(!0)),O=x[0];x[1];Object(r.useEffect)(function(){n&&R(z+"/memories",n.username).then(function(e){p(e),h(e.map(function(e){return{name:e.name,_id:e._id}}))})},[o]),Object(r.useEffect)(function(){y?l(!0):(l(!1),u(!o))},[y]);var j=g.sort(function(e,n){return e[k].toLowerCase()<n[k].toLowerCase()?O?-1:1:e[k].toLowerCase()>n[k].toLowerCase()?1:0});return a.a.createElement(a.a.Fragment,null,a.a.createElement(br,null,a.a.createElement(vr,{onClick:function(){return l(!c)}},"ReMemory"," ",c?a.a.createElement(Pr,null,"⚲"):a.a.createElement(Rr,null,"+")),a.a.createElement(hr,null,c&&a.a.createElement(dr,{updateMemory:y,setUpdateMemory:w,memoryLinks:v,memories:g,currentUser:n,setShowMemoryInput:l,toggleRefresh:o,setToggleRefresh:u}),!c&&a.a.createElement(fr,{searchQuery:m,setSearchQuery:d,setFocus:function(){return e="SearchField",document.getElementById(e).focus(),void document.getElementById(e).blur();var e},memories:j,setUpdateMemory:w}))),!c&&a.a.createElement(pr,{toggleRefresh:o,setToggleRefresh:u}))},dr=function(e){var n=e.updateMemory,t=e.setUpdateMemory,o=e.memoryLinks,u=e.memories,i=e.currentUser,c=e.setShowMemoryInput,l=e.toggleRefresh,s=e.setToggleRefresh,m=Object(r.useState)(n?n.name:""),d=m[0],f=m[1],g=Object(r.useState)(n?n.description:""),p=g[0],b=g[1],v=Object(r.useState)(""),h=v[0],E=v[1],y=Object(r.useState)(n?n.tags:[]),w=y[0],S=y[1],k=Object(r.useState)(o&&o[0]&&o[0].name),x=k[0],O=k[1],j=Object(r.useState)(u&&n?n.children.map(function(e){return u.find(function(n){return n._id===e.linkedId}).name.toLowerCase()}):[]),C=j[0],U=j[1],L=Object(r.useState)(""),T=L[0],D=L[1],I=Object(r.useState)(u&&n?n.parents.map(function(e){return u.find(function(n){return n._id===e.linkedId}).name.toLowerCase()}):[]),M=I[0],_=I[1];return Object(r.useEffect)(function(){document.getElementById("InputName").focus()},[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Yr,null,a.a.createElement(Fr,null,"Name"),a.a.createElement(Mr,{id:"InputName",value:d,onChange:function(e){return f(e.target.value)}})),a.a.createElement(Yr,null,a.a.createElement(Fr,null,"Description"),a.a.createElement(_r,{id:"InputDescription",value:p,onChange:function(e){return b(e.target.value)}})),a.a.createElement(Yr,null,a.a.createElement(Fr,null,"Tags"),a.a.createElement(Ar,null,a.a.createElement(Xr,{id:"TagInput",value:h,onChange:function(e){return E(e.target.value)}}),a.a.createElement(zr,{onClick:function(){h&&!w.find(function(e){return e===h.toLowerCase()})&&S([].concat(w,[h.toLowerCase()])),E(""),document.getElementById("TagInput").focus()}},"+")),a.a.createElement(Or,null,w&&w.map(function(e){return a.a.createElement(jr,{key:e,onClick:function(e){S(w.filter(function(n){return n!==e.target.innerText.substring(0,e.target.innerText.length-2)})),document.getElementById("TagInput").focus()}},e," ×")}))),a.a.createElement(Yr,null,a.a.createElement(Fr,null,"Children"),a.a.createElement(Ar,null,a.a.createElement(Hr,{id:"SelectChild",value:x,onChange:function(e){O(e.target.value)}},o.filter(function(e){return!C.some(function(n){return n===e.name.toLowerCase()})}).map(function(e){return a.a.createElement("option",{key:e.name,value:e.name},e.name)})),a.a.createElement(zr,{onClick:function(){x&&!C.find(function(e){return e===x.toLowerCase()})&&U([].concat(C,[x.toLowerCase()])),O(o.find(function(e){return!C.find(function(n){return n===e.name.toLowerCase()})})?o.find(function(e){return!C.find(function(n){return n===e.name.toLowerCase()})}).name:o[0].name),_(M.filter(function(e){return e!==x.toLowerCase()})),document.getElementById("SelectChild").focus()}},"+")),a.a.createElement(Or,null,C&&C.map(function(e){return a.a.createElement(jr,{key:e,onClick:function(e){U(C.filter(function(n){return n!==e.target.innerText.substring(0,e.target.innerText.length-2)})),O(C.find(function(e){return e!==x})),document.getElementById("SelectChild").focus()}},e," ×")}))),a.a.createElement(Yr,null,a.a.createElement(Fr,null,"Parents"),a.a.createElement(Ar,null,a.a.createElement(Wr,{id:"SelectParent",value:T,onChange:function(e){D(e.target.value)}},o.filter(function(e){return!M.some(function(n){return n===e.name.toLowerCase()})}).map(function(e){return a.a.createElement("option",{key:e.name,value:e.name},e.name)})),a.a.createElement(zr,{onClick:function(){T&&!M.find(function(e){return e===T.toLowerCase()})&&_([].concat(M,[T.toLowerCase()])),D(o.find(function(e){return!M.find(function(n){return n===e.name.toLowerCase()})})?o.find(function(e){return!M.find(function(n){return n===e.name.toLowerCase()})}).name:o[0].name),U(C.filter(function(e){return e!==T.toLowerCase()})),document.getElementById("SelectParent").focus()}},"+")),a.a.createElement(Or,null,M&&M.map(function(e){return a.a.createElement(jr,{key:e,onClick:function(e){_(M.filter(function(n){return n!==e.target.innerText.substring(0,e.target.innerText.length-2)})),D(M.find(function(e){return e!==T})),document.getElementById("SelectParent").focus()}},e," ×")}))),!n&&a.a.createElement(Vr,{onClick:function(){Y(z+"/memories",{type:"Memory",name:d,description:p,tags:w,children:C.map(function(e){var n=u.find(function(n){return e.toLowerCase()===n.name.toLowerCase()});return n&&{_id:Be(),type:"Link",name:"child",linkedId:n._id,linkedName:n.name}}),parents:M.map(function(e){var n=u.find(function(n){return e.toLowerCase()===n.name.toLowerCase()});return n&&{_id:Be(),type:"Link",name:"parent",linkedId:n._id,linkedName:n.name}})},i.username).then(function(e){console.log("Successfully created: ",e),c(!1),s(!l)})}},"Save memory"),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Vr,{onClick:function(){A(z+"/memories/"+n._id,{type:"Memory",name:d,description:p,tags:w,children:C.map(function(e){var n=u.find(function(n){return e.toLowerCase()===n.name.toLowerCase()});return n&&{_id:Be(),type:"Link",name:"child",linkedId:n._id,linkedName:n.name}}),parents:M.map(function(e){var n=u.find(function(n){return e.toLowerCase()===n.name.toLowerCase()});return n&&{_id:Be(),type:"Link",name:"parent",linkedId:n._id,linkedName:n.name}})},i.username).then(function(e){console.log("Successfully updated: ",e),t(void 0)})}},"Update memory"),a.a.createElement(Br,{onClick:function(){X(z+"/memories/"+n._id,i.username).then(function(e){console.log("Successfully removed: ",e),t(void 0)})}},"Delete memory")))},fr=function(e){var n=e.searchQuery,t=e.setFocus,r=e.setSearchQuery,o=e.memories,u=e.setUpdateMemory;return a.a.createElement(a.a.Fragment,null,a.a.createElement(wr,null,a.a.createElement(Sr,{id:"SearchField",type:"text",value:n,onChange:function(e){r(e.target.value)}}),a.a.createElement(Qr,{onClick:function(){r(""),t()}},"×")),a.a.createElement(xr,null,o&&o.map(function(e){return a.a.createElement(gr,{key:e.name,memories:o,memory:e,query:n.toLowerCase(),setSearchQuery:r,setFocus:t,setUpdateMemory:u})})))},gr=function(e){var n=e.memories,t=e.memory,o=e.query,u=e.setFocus,i=e.setSearchQuery,c=e.setUpdateMemory,l=Object(r.useState)(!1),s=l[0],m=l[1],d=t.children.map(function(e){return n.find(function(n){return n._id===e.linkedId})||[]}),f=t.parents.map(function(e){return n.find(function(n){return n._id===e.linkedId})||[]});return(t.name.toLowerCase().includes(o)||t.description.toLowerCase().includes(o)||t.tags.some(function(e){return e.includes(o)}))&&a.a.createElement(yr,null,f&&0!==f.length&&a.a.createElement(Lr,null,a.a.createElement(Nr,{onClick:function(){return m(!s)}},t.name,s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Kr,{onClick:function(){return c({_id:t._id,name:t.name,description:t.description,tags:t.tags,parents:t.parents,children:t.children})}},"✎"))),f.map(function(e){return a.a.createElement(Tr,{key:e.name,onClick:function(){u(),i(e.name)}},e.name)})),!f||0===f.length&&a.a.createElement(Dr,{onClick:function(){return m(!s)}},t.name,s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Kr,{onClick:function(){return c({_id:t._id,name:t.name,description:t.description,tags:t.tags,parents:t.parents,children:t.children})}},"✎"))),a.a.createElement(Or,null,t.tags.map(function(e){return a.a.createElement(jr,{key:e,onClick:function(){u(),i(e)}},e)})),t.description,d&&0!==d.length&&a.a.createElement(Cr,null,d.map(function(e){return a.a.createElement(Ur,{key:e.name,onClick:function(){u(),i(e.name)}},e.name)})))},pr=function(e){var n=e.toggleRefresh,t=e.setToggleRefresh;return a.a.createElement(Er,{onClick:function(){document.getElementById("SearchField").focus(),t(!n)}},a.a.createElement("span",null,"⌃"),a.a.createElement("span",null,"⌃"))},br=s.b.div(sr()),vr=s.b.h2(lr(),y||"white"),hr=s.b.div(cr(),y||"white"),Er=s.b.div(ir(),h,y,b),yr=s.b.li(ur()),wr=s.b.div(or()),Sr=s.b.input(ar(),h,y),kr=s.b.button(rr()),xr=s.b.ul(tr()),Or=s.b.div(nr()),jr=s.b.span(er(),h,y),Cr=Object(s.b)(Or)($t()),Ur=Object(s.b)(jr)(Zt()),Lr=Object(s.b)(Or)(Gt()),Tr=Object(s.b)(jr)(Jt()),Dr=s.b.span(Kt(),S),Ir=s.b.button(Qt(),function(e){return e.selected?y:h},w,h),Mr=s.b.input(Nt(),h),_r=s.b.textarea(Wt(),h),Fr=s.b.label(Ht(),S),Pr=s.b.div(qt(),w),Rr=s.b.span(Bt(),w),Yr=s.b.div(Vt()),Ar=s.b.div(zt()),Xr=Object(s.b)(Mr)(Xt()),zr=Object(s.b)(Ir)(At()),Vr=Object(s.b)(Ir)(Yt()),Br=Object(s.b)(Vr)(Rt(),p),qr=s.b.select(Pt(),h),Hr=Object(s.b)(qr)(Ft()),Wr=Object(s.b)(qr)(_t()),Nr=Object(s.b)(Dr)(Mt()),Qr=Object(s.b)(kr)(It()),Kr=Object(s.b)(kr)(Dt());function Jr(){var e=c()(["\n  background-color: ",";\n  color: ",";\n  width: 100%;\n  padding: 0.5rem 0.5rem;\n  margin: 0rem 0.05rem 0.6rem;\n  outline: none;\n  border: none;\n\n  :hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"]);return Jr=function(){return e},e}function Gr(){var e=c()(["\n  display: flex;\n  justify-content: stretch;\n"]);return Gr=function(){return e},e}function Zr(){var e=c()(["\n  color: ",";\n  display: flex;\n  justify-content: center;\n  margin: 0;\n  padding: 0;\n"]);return Zr=function(){return e},e}var $r=["Users","Chat","Habits","ReMemory"],ea=function(){var e=Object(r.useState)("Welcome"),n=e[0],t=e[1],o=Object(r.useState)([]),u=o[0],i=o[1],c=Object(r.useState)(void 0),s=c[0],d=c[1],f=Object(r.useState)(!1),g=f[0],p=f[1],b=Object(r.useState)(!1),v=b[0],h=b[1],E=Object(r.useState)(!1),y=E[0],w=E[1],S=Object(r.useState)(!1),k=S[0],x=S[1],O=Object(r.useState)(!1),j=O[0],C=O[1];return Object(r.useEffect)(function(){h(!1),setTimeout(function(){h(!0)},400),R(z+"/users","Unauthorized").then(function(e){e.error||(i(e),d(e.find(function(e){return e.username==={}.MOCK_USER||sessionStorage.getItem("username")&&e.password==={}.MOCK_PASSWORD||sessionStorage.getItem("password")})))}),t(sessionStorage.getItem("tab")||"Welcome")},[y,k,j]),a.a.createElement(m.b,{query:"2994927498",render:function(e){return v&&a.a.createElement(a.a.Fragment,null,a.a.createElement(T,{siteTitle:e.site.siteMetadata.title,setCurrentUser:d,setLoginSuccessful:x}),!s&&!g&&a.a.createElement(ta,null,a.a.createElement(je,{setSignup:p,signUpSuccessful:y,setLoginSuccessful:x,setCurrentUser:d})),!s&&g&&a.a.createElement(ta,null,a.a.createElement(it,{setSignUpSuccessful:w,setCurrentUser:d,currentUser:s,setSignup:p})),s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(ra,null,$r&&$r.map(function(e){return a.a.createElement(aa,{key:e,selected:n===e,onClick:function(){return na(e,t)}},e)})),a.a.createElement(ta,null,"Welcome"===n&&a.a.createElement(Ie,{currentUser:s}),"Users"===n&&a.a.createElement(Lt,{currentUser:s,users:u,updateUsers:j,setUpdateUsers:C}),"Chat"===n&&a.a.createElement(ve,{users:u,currentUser:s}),"Habits"===n&&a.a.createElement(nt,{users:u,currentUser:s}),"ReMemory"===n&&a.a.createElement(mr,{users:u,currentUser:s}))))},data:l})},na=function(e,n){n(e),sessionStorage.setItem("tab",e)},ta=s.b.div(Zr(),p),ra=s.b.div(Gr()),aa=s.b.button(Jr(),function(e){return e.selected?y:h},p,y);n.default=function(){return a.a.createElement(o.a,null,a.a.createElement(u.a,{title:"Home",keywords:["gatsby","application","react"]}),a.a.createElement(ea,null))}},149:function(e,n,t){"use strict";var r=t(0),a=t.n(r),o=t(4),u=t.n(o),i=(t(154),function(e){var n=e.children;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{margin:"0 auto",padding:"0 0.2rem 1.45rem",paddingTop:0}},a.a.createElement("main",null,n),a.a.createElement("footer",null)))});i.propTypes={children:u.a.node.isRequired},n.a=i},150:function(e,n,t){"use strict";var r=t(151),a=t(0),o=t.n(a),u=t(4),i=t.n(u),c=t(155),l=t.n(c);function s(e){var n=e.description,t=e.lang,a=e.meta,u=e.keywords,i=e.title,c=r.data.site,s=n||c.siteMetadata.description;return o.a.createElement(l.a,{htmlAttributes:{lang:t},title:i,titleTemplate:"%s | "+c.siteMetadata.title,meta:[{name:"description",content:s},{property:"og:title",content:i},{property:"og:description",content:s},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:c.siteMetadata.author},{name:"twitter:title",content:i},{name:"twitter:description",content:s}].concat(u.length>0?{name:"keywords",content:u.join(", ")}:[]).concat(a)})}s.defaultProps={lang:"en",meta:[],keywords:[]},s.propTypes={description:i.a.string,lang:i.a.string,meta:i.a.array,keywords:i.a.arrayOf(i.a.string),title:i.a.string.isRequired},n.a=s},151:function(e){e.exports={data:{site:{siteMetadata:{title:"MyWebTools",description:"The modular web tools, started with a chat.",author:"@gatsbyjs"}}}}},152:function(e,n,t){var r;e.exports=(r=t(156))&&r.default||r},153:function(e,n,t){"use strict";t.d(n,"b",function(){return s});var r=t(0),a=t.n(r),o=t(4),u=t.n(o),i=t(33),c=t.n(i);t.d(n,"a",function(){return c.a});t(152);var l=a.a.createContext({}),s=function(e){return a.a.createElement(l.Consumer,null,function(n){return e.data||n[e.query]&&n[e.query].data?(e.render||e.children)(e.data?e.data.data:n[e.query].data):a.a.createElement("div",null,"Loading (StaticQuery)")})};s.propTypes={data:u.a.object,query:u.a.string.isRequired,render:u.a.func,children:u.a.func}},156:function(e,n,t){"use strict";t.r(n);t(34);var r=t(0),a=t.n(r),o=t(4),u=t.n(o),i=t(56),c=t(2),l=function(e){var n=e.location,t=c.default.getResourcesForPathnameSync(n.pathname);return a.a.createElement(i.a,Object.assign({location:n,pageResources:t},t.json))};l.propTypes={location:u.a.shape({pathname:u.a.string.isRequired}).isRequired},n.default=l},175:function(e){e.exports={data:{site:{siteMetadata:{title:"MyWebTools"}}}}}}]);
//# sourceMappingURL=component---src-pages-index-js-adcb3077f7f5d93ab2f1.js.map